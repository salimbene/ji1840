{"version":3,"sources":["services/logService.js","components/Home.jsx","components/common/Input.jsx","components/common/Select.jsx","components/common/TextArea.jsx","components/common/Check.jsx","components/common/ListGroup.jsx","components/common/Form.jsx","services/httpService.js","services/unitsService.js","services/usersService.js","components/UnitsForm.jsx","components/common/SearchBox.jsx","components/common/CarbonTableTitle.jsx","components/common/CarbonTablePagination.jsx","components/common/CarbonModal.jsx","components/common/Unauthorized.jsx","components/common/CarbonTableHeader.jsx","components/common/CarbonTableBody.jsx","components/common/CarbonTable.jsx","services/authService.js","components/UnitsTable.jsx","utils/paginate.js","components/Units.jsx","components/UsersTable.jsx","components/Users.jsx","components/UsersForm.jsx","utils/dates.js","utils/formatter.js","components/ExpensesTable.jsx","components/common/Pagination.jsx","services/expensesService.js","components/CurrentMonth.jsx","components/PeriodsTable.jsx","services/periodsService.js","components/Periods.jsx","components/ExpensesStats.jsx","components/ExpensesDetails.jsx","components/ExpensesBanner.jsx","components/common/SimpleModal.jsx","services/pdetailsService.js","services/consortiaService.js","components/PeriodsForm.jsx","components/common/PeriodSelector.jsx","components/Expenses.jsx","components/common/BtnAux.jsx","services/pmodelsServices.js","components/ExpensesForm.jsx","components/PeriodsDTable.jsx","components/Payments.jsx","components/SuppliersTable.jsx","services/suppliersService.js","components/Suppliers.jsx","components/SuppliersForm.jsx","components/RegisterForm.jsx","components/LoginForm.jsx","components/Logout.jsx","components/NotFound.jsx","components/ModelsForm.jsx","components/ModelsTable.jsx","components/Models.jsx","components/Consortia.jsx","components/common/ProtectedRoute.jsx","components/common/SideBarItem.jsx","components/common/SideSeparator.jsx","components/SideBar.jsx","components/NavBar.jsx","App.js","serviceWorker.js","index.js"],"names":["logService","init","Raven","config","install","log","error","captureException","Home","state","react_default","a","createElement","react","className","Component","Input","_ref","name","label","value","rest","Object","objectWithoutProperties","Fragment","htmlFor","assign","id","concat","placeholder","fullName","Select","field","options","map","option","index","key","_id","includes","focusable","preserveAspectRatio","style","willChange","xmlns","width","height","viewBox","aria-hidden","d","TextArea","Check","onChange","checked","console","type","ListGroup","items","textProperty","valueProperty","onItemSelect","selectedItem","item","onClick","defaultProps","Form","data","errors","validate","Joi","_this","schema","abortEarly","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","details","Symbol","iterator","next","done","path","message","err","return","validateProperty","obj","defineProperty","handleSubmit","e","preventDefault","setState","doSubmit","handleChange","_ref2","input","currentTarget","objectSpread","keys","errorMessage","selectedIndex","handleCheck","target","disabled","this","arguments","length","readonly","_this$state","common_Input","onFocus","handleFocus","readOnly","_this$state2","common_TextArea","_this$state3","common_Select","common_Check","classNAme","for","class","textProp","valueProp","selected","common_ListGroup","axios","defaults","baseURL","process","interceptors","response","use","status","Promise","reject","logger","toast","httpService","get","post","put","delete","setJwt","jwt","headers","common","apiEndpoint","unitUrl","getUnits","http","getUnit","unitId","saveUnit","unit","body","userUrl","getUsers","getUser","userId","saveUser","user","UnitsForm","fUnit","flat","floor","polygon","total","covered","uncovered","semi","coefficient","landlordId","users","string","required","number","max","parseSurface","parseLandlord","find","u","lastname","_callee","regenerator_default","wrap","_context","prev","landlord","sup","success","position","t0","props","history","push","stop","match","params","mapToViewModel","populateUsers","populateUnits","onSubmit","renderInput","renderSelect","renderButton","SearchBox","CarbonTableTitle","title","helper","btnLabel","btnClick","currentUser","isCouncil","event","CarbonTablePagination","itemsCount","pageSize","currentPage","onPageChange","onPageSize","pagesCount","Math","ceil","pages","_","range","data-pagination","aria-label","tabIndex","data-items-per-page","data-displayed-item-range","data-total-items","data-page-number-input","p","i","data-page-backward","data-page-forward","CarbonModal","isOpen","toggle","cancelBtnLabel","submitBtnLabel","submit","danger","role","aria-modal","aria-labelledby","aria-describedby","Unauthorized","CarbonTableHeader","raiseSort","sortColumn","order","onSort","renderSortIcon","column","_this2","columns","data-event","CarbonTableBody","renderCell","content","createKey","_this$props","CarbonTable","data-table","common_CarbonTableHeader","common_CarbonTableBody","tokenKey","mail","password","sent","localStorage","setItem","getJwt","getItem","authService","login","_x","_x2","_login","apply","logout","removeItem","getCurrentUser","jwtDecode","loginWithJwt","UnitsTable","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Link","to","toFixed","deleteColumn","onDelete","auth","isAdmin","units","common_CarbonTable","paginate","pageNumber","startIndex","slice","take","Units","handleDelete","selectedUnit","rollback","filter","ex","toggleDelete","handleSort","handleAddUnit","handlePageSize","handlePageChange","page","arrow","Number","handleSearch","query","searchQuery","getPageData","allUnits","filtered","toLowerCase","startsWith","orderBy","totalCount","modalBody","modalProps","modal","bind","assertThisInitialized","prevState","common_Unauthorized","_this$getPageData","common_CarbonModal","common_CarbonTableTitle","common_SearchBox","components_UnitsTable","common_CarbonTablePagination","UsersTable","Users","selectedUser","handleAddUser","allUsers","components_UsersTable","UsersForm","firstname","phone","notes","balance","isLandlord","min","email","allow","boolean","columnsUnits","_context2","replace","populateUser","renderCheck","renderTextArea","renderAdmin","today","Date","monthLabels","getCurrentPeriod","month","getMonth","year","getFullYear","getPeriod","day","minus","getLastXMonths","n","xMonths","period","getLastXYears","formatDate","date","toLocaleDateString","currency","ammount","Intl","NumberFormat","format","ExpensesTable","expense","category","expenses","Pagination","expUrl","getExpenses","getExpensesByPeriod","deleteExpense","expId","saveExpense","exp","CurrentMonth","selectedPeriod","allExpenses","react_toastify","components_ExpensesTable","viewOnly","common_Pagination","PeriodsTable","expensesA","incomeA","balanceA","expensesB","incomeB","balanceB","isClosed","onClosePeriod","periods","url","savePeriod","initPeriod","Periods","periodId","handleNewPeriod","toggleNewPeriod","handleClsPeriod","asyncToGenerator","mark","mapToMongoModel","Error","toggleClsPeriod","allPeriods","ind","modalBodyNew","modalPropsNew","_this$state4","newModal","modalBodyDel","modalPropsDel","_this$state5","delModal","modalBodyClose","modalPropsClose","_this$state6","clsModal","__v","_this$state7","components_PeriodsTable","ExpensesStats","expA","expB","sorted","grouped","groupBy","totalA","reduce","acum","current","totalB","scope","subtotal","concept","ExpensesDetails","sortBy","subtExpenseA","expenseA","subtDebtA","debtA","subtIntA","intA","subtExpenseB","expenseB","subtDebtB","debtB","subtIntB","intB","totCoef","model","colSpan","header","expenseTotal","ExpensesBanner","consortia","address","closeBtn","SimpleModal","action","Modal","ModalHeader","close","ModalBody","Alert","color","ModalFooter","Button","getPDetailsByPeriod","savePDetails","getConsortia","saveConsortia","PeriodsForm","toPDF","canvas","imgData","pdf","input2","canvas2","imgData2","document","getElementById","html2canvas","toDataURL","jsPDF","addImage","addPage","save","togglePeriod","handleSavePeriod","_callee2","ModalPeriodBody","bodyPeriod","bodyNewPeriod","newPeriod","populatePeriod","populateDetails","populateExpenses","populateConsortia","_p","saveButtonLabel","common_SimpleModal","components_ExpensesBanner","components_ExpensesStats","components_ExpensesDetails","PeriodSelector","months","years","handlePeriod","Expenses","selectedExpense","handlePeriodSelect","handleAddExpense","m","renderViewTags","count","common_PeriodSelector","BtnAux","supUrl","getModels","saveModel","ExpensesForm","excluded","selectedEx","models","typeOptions","categoryOptions","valid","array","_auth$getCurrentUser","delEx","newState","newExcluded","expenseId","populateModels","v","getLabel","_this3","selectedExKey","common_BtnAux","addExcluded","renderExcluded","PeriodsDTable","isPayedA","onRegister","isPayedB","Payments","allDetails","detail","handleRegister","selectedDetail","isPayedKey","payedAB","toggleRegister","handleSortDetails","components_PeriodsDTable","SuppliersTable","supplier","suppliers","saveSupplier","Suppliers","supId","selectedSupplier","handleAddSuppplier","allSuppliers","components_SuppliersTable","SuppliersForm","contact","comments","supplierId","populateSuppliers","RegisterForm","LoginForm","username","_this$state$data","location","window","from","pathname","Redirect","Logout","NotFound","ModelsForm","fUnits","landlordKey","handleUnitSort","sortUnits","getCoefSum","c","handleAddModel","selectedUnitKey","info","bufferUnits","getSortedData","modelId","sortedUnits","renderProps","ModelsTable","Models","selectedModel","allModels","components_ModelsTable","Consortia","cbu","bank","interest","populateConsotia","ProtectedRoute","component","render","Route","SideBarItem","NavLink","SideSeparator","SideBar","common_SideSeparator","common_SideBarItem","NavBar","App","components_NavBar","components_SideBar","Switch","common_ProtectedRoute","exact","Boolean","hostname","ReactDOM","BrowserRouter","src_App","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.a879eb79.chunk.js","sourcesContent":["import Raven from 'raven-js';\n\nfunction init() {\n  Raven.config(\n    'https://a92e94fcca124123b2bf3379ec01d717@sentry.io/1381521'\n  ).install();\n}\n\nfunction log(error) {\n  Raven.captureException(error);\n}\n\nexport default {\n  init,\n  log\n};\n","import React, { Component, Fragment } from 'react';\n\nclass Home extends Component {\n  state = {};\n\n  componentDidMount() {}\n  render() {\n    return (\n      <Fragment>\n        <div className=\"home\" />\n      </Fragment>\n    );\n  }\n}\n\nexport default Home;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nconst Input = ({ name, label, error, value, ...rest }) => {\n  return (\n    <React.Fragment>\n      <div className=\"bx--form-item\">\n        <label htmlFor={name} className=\"bx--label\">\n          {label}\n        </label>\n        <input\n          {...rest}\n          name={name}\n          id={name}\n          value={value}\n          className={`bx--text-input required ${error ? 'data-invalid' : ''}`}\n          placeholder={`Ingrese el ${label} aquí`}\n        />\n        <div className=\"bx--form-requirement\">{error}</div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired\n  // value: PropTypes.string.isRequired //Puede ser number\n};\n\nexport default Input;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst fullName = ['tenant', 'landlord', 'lastname', 'userId', 'landlordId'];\n\nconst Select = ({ name, label, field, options, ...rest }) => {\n  return (\n    <div className=\"bx--form-item\">\n      <div className=\"bx--select\">\n        {label && (\n          <label className=\"bx--label\" htmlFor={name}>\n            {label}\n          </label>\n        )}\n        <div className=\"bx--select-input__wrapper\">\n          <select name={name} id={name} {...rest} className=\"bx--select-input\">\n            <option value=\"\" />\n            {options.map((option, index) => (\n              <option\n                key={option._id || index}\n                value={option[field] || option}\n                id={option._id || index}\n                className=\"bx--select-option\"\n              >\n                {(fullName.includes(name)\n                  ? `${option['lastname']}, ${option['firstname']}`\n                  : option[field]) || option}\n              </option>\n            ))}\n          </select>\n          <svg\n            focusable=\"false\"\n            preserveAspectRatio=\"xMidYMid meet\"\n            style={{ willChange: 'transform' }}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"bx--select__arrow\"\n            width=\"10\"\n            height=\"6\"\n            viewBox=\"0 0 10 6\"\n            aria-hidden=\"true\"\n          >\n            <path d=\"M5 6L0 1 .7.3 5 4.6 9.3.3l.7.7z\" />\n          </svg>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nSelect.propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  options: PropTypes.array.isRequired\n  // value: PropTypes.string.isRequired // string or number..\n};\n\nexport default Select;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nconst TextArea = ({ name, label, error, ...rest }) => {\n  return (\n    <div className=\"bx--form-item\">\n      <label className=\"bx--label \" htmlFor={name}>\n        {label}\n      </label>\n      <textarea\n        {...rest}\n        name={name}\n        id={name}\n        className=\"bx--text-area bx--text-area--v2\"\n      />\n    </div>\n  );\n};\n\nTextArea.propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired\n  // value: PropTypes.string.isRequired //Puede ser number\n};\n\nexport default TextArea;\n","import React from 'react';\n\nconst Check = ({ name, label, onChange, checked, ...rest }) => {\n  console.log('checked', label, checked);\n  return (\n    <div className=\"bx--form-item bx--checkbox-wrapper\">\n      <input\n        id={name}\n        className=\"bx--checkbox\"\n        type=\"checkbox\"\n        name={name}\n        checked={checked}\n        onChange={onChange}\n      />\n      <label className=\"bx--checkbox-label\" htmlFor={name}>\n        {label}\n      </label>\n    </div>\n  );\n};\n\nexport default Check;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ListGroup = ({\n  items,\n  textProperty,\n  valueProperty,\n  onItemSelect,\n  selectedItem\n}) => {\n  return (\n    <ul className=\"list-group\">\n      {items.map(item => (\n        <li\n          onClick={() => onItemSelect(item)}\n          key={item[valueProperty]}\n          className={\n            item === selectedItem ? 'list-group-item active' : 'list-group-item'\n          }\n        >\n          {item[textProperty]}\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nListGroup.defaultProps = {\n  textProperty: 'name',\n  valueProperty: 'id'\n};\n\nListGroup.propTypes = {\n  // pisos: PropTypes.array.isRequired,\n  onItemSelect: PropTypes.func.isRequired\n};\n\nexport default ListGroup;\n","import React, { Component } from 'react';\nimport Joi from 'joi-browser';\nimport Input from './Input';\nimport Select from './Select';\nimport TextArea from './TextArea';\nimport Check from './Check';\nimport ListGroup from './ListGroup';\n\nclass Form extends Component {\n  state = {\n    data: {},\n    errors: {}\n  };\n\n  validate = () => {\n    const options = { abortEarly: false };\n    const { error } = Joi.validate(this.state.data, this.schema, options);\n\n    if (!error) return null;\n    const errors = {};\n\n    for (let item of error.details) {\n      console.log(`Validating ${item.path[0]}: ${item.message}`);\n      errors[item.path[0]] = `El valor ${\n        item.path[0]\n      } es incorrecto o se encuentra vacio.`; // item.message;\n    }\n    return errors;\n  };\n\n  validateProperty = ({ name, value }) => {\n    const obj = { [name]: value };\n    const schema = { [name]: this.schema[name] };\n    const { error } = Joi.validate(obj, schema);\n    return error ? `El dato es inválido o se encuentra vacio.` : null; //error.details[0].message\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    const errors = this.validate();\n    this.setState({ errors: errors || {} });\n    if (errors) return;\n    this.doSubmit();\n  };\n\n  handleChange = ({ currentTarget: input }) => {\n    const errors = { ...this.state.errors };\n    const keys = { ...this.state.keys };\n    const errorMessage = this.validateProperty(input);\n    if (errorMessage) errors[input.name] = errorMessage;\n    else delete errors[input.name];\n\n    const data = { ...this.state.data };\n    data[input.name] = input.value;\n\n    if (input.options) {\n      const { id } = input.options[input.options.selectedIndex];\n      keys[`${input.name}Key`] = id;\n    }\n\n    this.setState({ data, errors, keys });\n  };\n\n  handleCheck = e => {\n    const data = { ...this.state.data };\n    data[e.target.name] = e.target.checked;\n    this.setState({ data });\n  };\n\n  renderButton(label) {\n    return (\n      <button\n        type=\"submit\"\n        disabled={this.validate()}\n        className=\"bx--btn bx--btn--primary\" //btn btn-primary btn-center mx-auto\n      >\n        {label}\n      </button>\n    );\n  }\n\n  renderInput(name, label, type = 'text', readonly = false) {\n    const { data, errors } = this.state;\n    return (\n      <Input\n        type={type}\n        name={name}\n        value={data[name]}\n        label={label}\n        onChange={this.handleChange}\n        onFocus={this.handleFocus}\n        error={errors[name]}\n        readOnly={readonly}\n      />\n    );\n  }\n  renderTextArea(name, label, type = 'text', readonly = false) {\n    const { data, errors } = this.state;\n    return (\n      <TextArea\n        type={type}\n        name={name}\n        value={data[name]}\n        label={label}\n        onChange={this.handleChange}\n        onFocus={this.handleFocus}\n        error={errors[name]}\n        readOnly={readonly}\n      />\n    );\n  }\n\n  renderSelect(name, label, field, options) {\n    const { data, errors } = this.state;\n    return (\n      <Select\n        name={name}\n        label={label}\n        field={field}\n        options={options}\n        value={data[name]}\n        onChange={this.handleChange}\n        error={errors[name]}\n      />\n    );\n  }\n\n  renderCheck(name, label) {\n    const { data } = this.state;\n    return (\n      <Check\n        name={name}\n        label={label}\n        onChange={this.handleCheck}\n        checked={data[name]}\n      />\n    );\n  }\n\n  renderOptions(name, options, label) {\n    return (\n      <div classNAme=\"form-group\">\n        <label for={name}>{label}</label>\n        <select class=\"form-control\" id={name}>\n          {options.map(option => (\n            <option>{option}</option>\n          ))}\n        </select>\n      </div>\n    );\n  }\n\n  renderListGroup(items, textProp, valueProp, onItemSelect, selected) {\n    return (\n      <div>\n        <ListGroup\n          items={items}\n          textProperty={textProp}\n          valueProperty={valueProp}\n          onItemSelect={onItemSelect}\n          selectedItem={selected}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Form;\n","import axios from 'axios';\nimport { toast } from 'react-toastify';\nimport logger from './logService';\n\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\n\naxios.interceptors.response.use(null, error => {\n  const expectedError =\n    error.response &&\n    error.response.status >= 400 &&\n    error.response.status < 500;\n\n  if (!expectedError) {\n    logger.log(error);\n    console.log('unexpected: ', error);\n    toast.error('⚠️ An unexpected error ocurred.');\n    return Promise.reject(error);\n  }\n\n  // toast.error(`⚠️ ${error.response.data}`);\n  return Promise.reject(error);\n});\n\nfunction setJwt(jwt) {\n  axios.defaults.headers.common['x-auth-token'] = jwt;\n}\n\nexport default {\n  get: axios.get,\n  post: axios.post,\n  put: axios.put,\n  delete: axios.delete,\n  setJwt\n};\n","import http from './httpService';\n\nconst apiEndpoint = '/funits';\n\nfunction unitUrl(id) {\n  return `${apiEndpoint}/${id}`;\n}\n\nexport function getUnits() {\n  return http.get(apiEndpoint);\n}\n\nexport function getUnit(unitId) {\n  return http.get(unitUrl(unitId));\n}\n\nexport function getUnitsOwnedBy(userId) {\n  return http.get(unitUrl(`ownedby/${userId}`));\n}\n\nexport function deleteUnit(unitId) {\n  return http.delete(unitUrl(unitId));\n}\n\n// export function updateUnit(unit) {\n//   return http.put(unitUrl(unit._id), unit);\n// }\n\nexport function saveUnit(unit) {\n  if (unit._id) {\n    const body = { ...unit };\n    delete body._id;\n    return http.put(unitUrl(unit._id), body);\n  }\n  return http.post(apiEndpoint, unit);\n}\n","import http from './httpService';\n\nconst apiEndpoint = '/users';\n\nfunction userUrl(id) {\n  return `${apiEndpoint}/${id}`;\n}\n\nexport function getUsers() {\n  return http.get(apiEndpoint);\n}\n\nexport function getLandlords() {\n  return http.get(`${apiEndpoint}/landlords`);\n}\n\nexport function getUser(userId) {\n  return http.get(userUrl(userId));\n}\n\nexport function deleteUser(userId) {\n  return http.delete(userUrl(userId));\n}\n\nexport function saveUser(user) {\n  if (user._id) {\n    const body = { ...user };\n    delete body._id;\n    return http.put(userUrl(user._id), body);\n  }\n  return http.post(apiEndpoint, user);\n}\n\nexport function register(user) {\n  return http.post(apiEndpoint, user);\n}\n","import React from 'react';\nimport Joi from 'joi-browser';\nimport { toast } from 'react-toastify';\nimport Form from './common/Form';\nimport { getUnit, saveUnit } from '../services/unitsService';\nimport { getUsers } from '../services/usersService';\n\nclass UnitsForm extends Form {\n  state = {\n    data: {\n      fUnit: '',\n      flat: '',\n      floor: 0,\n      polygon: '',\n      total: 0,\n      covered: 0,\n      uncovered: 0,\n      semi: 0,\n      coefficient: 0,\n      landlordId: ''\n    },\n    users: [],\n    errors: {},\n    keys: {}\n  };\n\n  schema = {\n    _id: Joi.string(),\n    fUnit: Joi.string()\n      .required()\n      .label('Unidad'),\n    floor: Joi.number()\n      .max(3)\n      .required()\n      .label('Piso'),\n    flat: Joi.string()\n      .max(2)\n      .label('Depto'),\n    polygon: Joi.string()\n      .required()\n      .label('Polígono'),\n    total: Joi.number()\n      .required()\n      .label('Superficie total'),\n    covered: Joi.number().label('Superficie cubierta'),\n    uncovered: Joi.number().label('Superficie descubierta'),\n    semi: Joi.number().label('Superficie semidescubierta'),\n    coefficient: Joi.number()\n      .required()\n      .label('Share'),\n    landlordId: Joi.string()\n      .required()\n      .label('Propietario') //No validation\n  };\n\n  async populateUsers() {\n    const { data: users } = await getUsers();\n    this.setState({ users });\n  }\n\n  async populateUnits() {\n    const unitId = this.props.match.params.id;\n    if (unitId === 'new') return;\n    const { data: unit } = await getUnit(unitId);\n    this.setState({ data: this.mapToViewModel(unit) }); //\n  }\n\n  async componentDidMount() {\n    await this.populateUsers();\n    await this.populateUnits();\n  }\n\n  mapToViewModel(unit) {\n    return {\n      _id: unit._id,\n      fUnit: unit.fUnit,\n      flat: unit.flat,\n      floor: unit.floor,\n      polygon: unit.polygon,\n      total: unit.sup.total,\n      covered: unit.sup.covered,\n      uncovered: unit.sup.uncovered,\n      semi: unit.sup.semi,\n      coefficient: unit.coefficient,\n      landlordId: unit.landlord.userId\n    };\n  }\n\n  parseSurface = fUnit => {\n    const { total, covered, uncovered, semi } = fUnit;\n    delete fUnit.total;\n    delete fUnit.covered;\n    delete fUnit.uncovered;\n    delete fUnit.semi;\n    return {\n      total,\n      covered,\n      uncovered,\n      semi\n    };\n  };\n\n  parseLandlord = fUnit => {\n    const { users } = this.state;\n    const landlordId = fUnit.landlordId;\n    delete fUnit.landlordId;\n\n    return {\n      userId: landlordId || '5c5f843049580aaa01a931c9', //id de -disponible-\n      name: users.find(u => u._id === landlordId).lastname\n    };\n  };\n\n  doSubmit = async () => {\n    const fUnit = { ...this.state.data };\n\n    fUnit.landlord = this.parseLandlord(fUnit);\n    fUnit.sup = this.parseSurface(fUnit);\n\n    try {\n      await saveUnit(fUnit);\n      toast.success('Los datos se guardaron exitosamente. ✔️', {\n        position: 'top-center'\n      });\n    } catch (ex) {\n      console.log(ex.response);\n    }\n\n    const { history } = this.props;\n    history.push('/units');\n  };\n\n  render() {\n    const { users } = this.state;\n    return (\n      <div className=\"bx--grid cc--units-form\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">{this.renderInput('fUnit', 'Unidad')}</div>\n            <div className=\"bx--col\">\n              {this.renderInput('polygon', 'Polígono')}\n            </div>\n            <div className=\"bx--col\">\n              {this.renderInput('coefficient', 'Coeficiente')}\n            </div>\n          </div>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">{this.renderInput('floor', 'Piso')}</div>\n            <div className=\"bx--col\">{this.renderInput('flat', 'Rótulo')}</div>\n            <div className=\"bx--col\">\n              {this.renderSelect('landlordId', 'Propietario', '_id', users)}\n            </div>\n          </div>\n          <div>\n            <p className=\"text-muted\">Superficie</p>\n          </div>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">\n              {this.renderInput('total', 'Total', 'text', true)}\n            </div>\n            <div className=\"bx--col\">\n              {this.renderInput('covered', 'Cubierta')}\n            </div>\n            <div className=\"bx--col\">\n              {this.renderInput('uncovered', 'Descubierta')}\n            </div>\n            <div className=\"bx--col\">\n              {this.renderInput('semi', 'Semicubierta')}\n            </div>\n          </div>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">{this.renderButton('Guardar')}</div>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default UnitsForm;\n","import React from 'react';\n\nconst SearchBox = ({ value, onChange }) => {\n  return (\n    <div className=\"bx--form-item reset-margin-bottom\">\n      <input\n        id=\"searchx\"\n        type=\"text\"\n        name=\"query\"\n        className=\"bx--text-input\"\n        placeholder=\"Buscar...\"\n        value={value}\n        onChange={e => onChange(e.currentTarget.value)}\n      />\n    </div>\n  );\n};\n\nexport default SearchBox;\n","import React, { Fragment } from 'react';\n\nconst CarbonTableTitle = ({\n  title,\n  helper,\n  btnLabel,\n  btnClick,\n  currentUser\n}) => {\n  return (\n    <Fragment>\n      <div className=\"bx--data-table-header\">\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">\n              <h4 className=\"bx--data-table-header__title\">{title}</h4>\n              <p className=\"bx--data-table-header__description\">{helper}</p>\n            </div>\n            <div className=\"bx--col bx--toolbar-content\">\n              {currentUser && currentUser.isCouncil && (\n                <button\n                  className=\"bx--btn bx--btn--sm bx--btn--primary\"\n                  onClick={event => btnClick(event)}\n                  type=\"button\"\n                >\n                  {btnLabel}\n                  <svg\n                    focusable=\"false\"\n                    preserveAspectRatio=\"xMidYMid meet\"\n                    // style=\"will-change: transform;\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    className=\"bx--btn__icon\"\n                    width=\"20\"\n                    height=\"20\"\n                    viewBox=\"0 0 32 32\"\n                    aria-hidden=\"true\"\n                  >\n                    <path d=\"M17 15V7h-2v8H7v2h8v8h2v-8h8v-2h-8z\" />\n                  </svg>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default CarbonTableTitle;\n","import React from 'react';\nimport _ from 'lodash';\n\nconst CarbonTablePagination = ({\n  itemsCount,\n  pageSize,\n  currentPage,\n  onPageChange,\n  onPageSize\n}) => {\n  const pagesCount = Math.ceil(itemsCount / pageSize);\n  const pages = _.range(1, pagesCount + 1);\n\n  if (pagesCount === 1) return null;\n\n  return (\n    <div className=\"bx--pagination\" data-pagination>\n      <div className=\"bx--pagination__left\">\n        <label\n          id=\"select-id-pagination-count-label\"\n          className=\"bx--pagination__text\"\n          htmlFor=\"select-id-pagination-count\"\n        >\n          Items por página:\n        </label>\n        <div className=\"bx--select bx--select--inline bx--select__item-count\">\n          <select\n            className=\"bx--select-input\"\n            id=\"select-id-pagination-count\"\n            aria-label=\"select number of items per page\"\n            tabIndex=\"0\"\n            data-items-per-page\n            onChange={event => onPageSize(event)}\n            value={pageSize}\n          >\n            <option className=\"bx--select-option\" value=\"10\">\n              10\n            </option>\n            <option className=\"bx--select-option\" value=\"20\">\n              20\n            </option>\n            <option className=\"bx--select-option\" value=\"30\">\n              30\n            </option>\n            <option className=\"bx--select-option\" value=\"40\">\n              40\n            </option>\n            <option className=\"bx--select-option\" value=\"50\">\n              50\n            </option>\n          </select>\n          <svg\n            focusable=\"false\"\n            // preserveAspectRatio=\"xMidYMid meet\"\n            // style={{will-change: transform}}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"bx--select__arrow\"\n            width=\"10\"\n            height=\"6\"\n            viewBox=\"0 0 10 6\"\n            aria-hidden=\"true\"\n          >\n            <path d=\"M5 6L0 1 .7.3 5 4.6 9.3.3l.7.7z\" />\n          </svg>\n        </div>\n        <span className=\"bx--pagination__text\">\n          <span data-displayed-item-range>1-10</span> de{' '}\n          <span data-total-items>{itemsCount}</span> items\n        </span>\n      </div>\n      <div className=\"bx--pagination__right\">\n        <div className=\"bx--select bx--select--inline bx--select__page-number\">\n          <select\n            className=\"bx--select-input\"\n            id=\"select-id-pagination-page\"\n            aria-label=\"select page number to view\"\n            tabIndex=\"0\"\n            data-page-number-input\n            onChange={event => onPageChange(event)}\n            value={currentPage}\n          >\n            {pages.map((p, i) => (\n              <option className=\"bx--select-option\" value={p} key={i}>\n                {p}\n              </option>\n            ))}\n          </select>\n          <svg\n            focusable=\"false\"\n            preserveAspectRatio=\"xMidYMid meet\"\n            // style=\"will-change: transform;\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"bx--select__arrow\"\n            width=\"10\"\n            height=\"6\"\n            viewBox=\"0 0 10 6\"\n            aria-hidden=\"true\"\n          >\n            <path d=\"M5 6L0 1 .7.3 5 4.6 9.3.3l.7.7z\" />\n          </svg>\n        </div>\n        <label\n          id=\"select-id-pagination-page-label\"\n          className=\"bx--pagination__text\"\n          htmlFor=\"select-id-pagination-page\"\n        >\n          de {pagesCount} páginas\n        </label>\n        <button\n          id=\"left\"\n          className=\"bx--pagination__button bx--pagination__button--backward\"\n          tabIndex=\"0\"\n          data-page-backward\n          aria-label=\"Backward button\"\n          onClick={event => onPageChange(event, -1)}\n        >\n          <svg\n            id=\"left\"\n            focusable=\"false\"\n            preserveAspectRatio=\"xMidYMid meet\"\n            // style=\"will-change: transform;\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"bx--pagination__nav-arrow\"\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 32 32\"\n            aria-hidden=\"true\"\n          >\n            <path d=\"M19 23l-8-7 8-7v14z\" />\n          </svg>\n        </button>\n        <button\n          id=\"right\"\n          className=\"bx--pagination__button bx--pagination__button--forward\"\n          tabIndex=\"0\"\n          data-page-forward\n          aria-label=\"Forward button\"\n          onClick={event => onPageChange(event, 1, pagesCount)}\n        >\n          <svg\n            id=\"right\"\n            focusable=\"false\"\n            preserveAspectRatio=\"xMidYMid meet\"\n            // style=\"will-change: transform;\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"bx--pagination__nav-arrow\"\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 32 32\"\n            aria-hidden=\"true\"\n          >\n            <path d=\"M13 9l8 7-8 7V9z\" />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default CarbonTablePagination;\n","import React from 'react';\n\nconst CarbonModal = ({\n  isOpen,\n  toggle,\n  cancelBtnLabel,\n  submitBtnLabel,\n  title,\n  label,\n  submit,\n  body,\n  danger\n}) => {\n  return (\n    <div\n      id=\"cc-carbon-modal\"\n      className={`bx--modal ${isOpen ? 'is-visible' : ''}`}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"cc-carbon-modal-label\"\n      aria-describedby=\"cc-carbon-modal-heading\"\n      tabIndex=\"-1\"\n    >\n      <div className=\"bx--modal-container\">\n        <div className=\"bx--modal-header\">\n          <p\n            className=\"bx--modal-header__label bx--type-delta\"\n            id=\"cc-carbon-modal-label\"\n          >\n            {label}\n          </p>\n          <p\n            className=\"bx--modal-header__heading bx--type-beta\"\n            id=\"cc-carbon-modal-heading\"\n          >\n            {title}\n          </p>\n          <button\n            className=\"bx--modal-close\"\n            type=\"button\"\n            aria-label=\"close modal\"\n            onClick={toggle}\n          >\n            <svg\n              focusable=\"false\"\n              preserveAspectRatio=\"xMidYMid meet\"\n              style={{ willChange: 'transform' }}\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"bx--modal-close__icon\"\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 16 16\"\n              aria-hidden=\"true\"\n            >\n              <path d=\"M12 4.7l-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z\" />\n            </svg>\n          </button>\n        </div>\n        <div className=\"bx--modal-content\">{body} </div>\n        <div className=\"bx--modal-footer\">\n          <button\n            className=\"bx--btn bx--btn--secondary\"\n            type=\"button\"\n            onClick={toggle}\n          >\n            {cancelBtnLabel}\n          </button>\n          <button\n            className={`bx--btn bx--btn--${danger ? 'danger' : 'primary'}`}\n            type=\"button\"\n            aria-label={`${danger ? 'danger' : 'primary'}`}\n            onClick={submit}\n          >\n            {submitBtnLabel}\n          </button>{' '}\n        </div>{' '}\n      </div>\n    </div>\n  );\n};\n\nexport default CarbonModal;\n","import React from 'react';\n\nconst Unauthorized = () => {\n  return (\n    <div className=\"alert alert-danger\" role=\"alert\">\n      Acceso no autorizado.\n    </div>\n  );\n};\n\nexport default Unauthorized;\n","import React, { Component } from 'react';\n\nclass CarbonTableHeader extends Component {\n  raiseSort = path => {\n    const sortColumn = { ...this.props.sortColumn };\n    if ((sortColumn.path = path))\n      sortColumn.order = sortColumn.order === 'asc' ? 'desc' : 'asc';\n    else {\n      sortColumn.path = path;\n      sortColumn.order = 'asc';\n    }\n    this.props.onSort(sortColumn);\n  };\n\n  renderSortIcon = column => {\n    const { sortColumn } = this.props;\n    if (column.path !== sortColumn.path) return null;\n    if (sortColumn.order === 'asc') return <i className=\"fa fa-sort-asc\" />;\n    return <i className=\"fa fa-sort-desc\" />;\n  };\n\n  render() {\n    return (\n      <thead>\n        <tr>\n          {this.props.columns.map(column => (\n            <th key={column.path || column.key}>\n              <button\n                className=\"bx--table-sort\"\n                data-event=\"sort\"\n                title=\"Name\"\n                onClick={() => this.raiseSort(column.path)}\n              >\n                <span className=\"bx--table-header-label\">{column.label}</span>\n                <svg\n                  focusable=\"false\"\n                  preserveAspectRatio=\"xMidYMid meet\"\n                  // style=\"will-change: transform;\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  className=\"bx--table-sort__icon\"\n                  width=\"16\"\n                  height=\"16\"\n                  viewBox=\"0 0 16 16\"\n                  aria-hidden=\"true\"\n                >\n                  <path d=\"M12.3 9.3l-3.8 3.8V1h-1v12.1L3.7 9.3 3 10l5 5 5-5z\" />\n                </svg>\n                <svg\n                  focusable=\"false\"\n                  preserveAspectRatio=\"xMidYMid meet\"\n                  // style=\"will-change: transform;\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  className=\"bx--table-sort__icon-unsorted\"\n                  width=\"16\"\n                  height=\"16\"\n                  viewBox=\"0 0 16 16\"\n                  aria-hidden=\"true\"\n                >\n                  <path d=\"M13.8 10.3L12 12.1V2h-1v10.1l-1.8-1.8-.7.7 3 3 3-3zM4.5 2l-3 3 .7.7L4 3.9V14h1V3.9l1.8 1.8.7-.7z\" />\n                </svg>\n              </button>\n            </th>\n          ))}\n        </tr>\n      </thead>\n    );\n  }\n}\n\nexport default CarbonTableHeader;\n","import React, { Component } from 'react';\nimport _ from 'lodash';\nclass CarbonTableBody extends Component {\n  renderCell = (item, column) => {\n    if (typeof item[column.path] === 'boolean' && !column.key)\n      return item[column.path] ? (\n        <div className=\"text-center\">\n          <i className=\"fa fa-check-square-o\" aria-hidden=\"true\" />\n        </div>\n      ) : (\n        <div className=\"text-center\">\n          <i className=\"fa fa-square-o\" aria-hidden=\"true\" />\n        </div>\n      );\n    if (column.content) return column.content(item);\n    return _.get(item, column.path);\n  };\n\n  createKey = (item, column) => {\n    return item._id + column.path || column.key;\n  };\n\n  render() {\n    const { data, columns } = this.props;\n\n    return (\n      <tbody>\n        {data.map(item => (\n          <tr key={item._id}>\n            {columns.map(column => (\n              <td key={this.createKey(item, column)}>\n                {this.renderCell(item, column)}\n              </td>\n            ))}\n          </tr>\n        ))}\n      </tbody>\n    );\n  }\n}\n\nexport default CarbonTableBody;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CarbonTableHeader from './CarbonTableHeader';\nimport CarbonTableBody from './CarbonTableBody';\n\nconst CarbonTable = ({\n  columns,\n  sortColumn,\n  onSort,\n  data,\n  btnClick,\n  currentUser,\n  ...rest\n}) => {\n  return (\n    <div className=\"bx--data-table-container cc--mb25\" data-table>\n      <table className=\"bx--data-table bx--data-table--sort\">\n        <CarbonTableHeader\n          columns={columns}\n          sortColumn={sortColumn}\n          onSort={onSort}\n        />\n        <CarbonTableBody data={data} columns={columns} />\n      </table>\n    </div>\n  );\n};\n\nCarbonTable.propTypes = {\n  columns: PropTypes.array.isRequired,\n  sortColumn: PropTypes.object.isRequired,\n  onSort: PropTypes.func.isRequired,\n  data: PropTypes.array.isRequired\n};\n\nexport default CarbonTable;\n","import http from './httpService';\nimport jwtDecode from 'jwt-decode';\nconst apiEndpoint = '/auth';\nconst tokenKey = 'consortia-token';\n\n//adding x-auth-token, if any, to the headers.\n//Required to access protected api endpoints.\nhttp.setJwt(getJwt());\n\nexport async function login(mail, password) {\n  const { data: jwt } = await http.post(apiEndpoint, { mail, password });\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\n\nexport default {\n  login,\n  logout,\n  getCurrentUser,\n  loginWithJwt,\n  getJwt\n};\n\n// const getTokenExpirationDate = token => {\n//   const decoded = jwtDecode(token);\n//   const { exp } = decoded;\n\n//   if (!exp) return null;\n\n//   return exp;\n// };\n\n// const isTokenExpired = token => {\n//   const tokenExpDate = getTokenExpirationDate(token);\n//   const now = Date.now() / 1000;\n\n//   return tokenExpDate < now;\n// };\n\n// authService.isLoggedIn = () => {\n//   const token = authService.getToken();\n//   return token && !isTokenExpired(token);\n// };\n\n// authService.login = async password => {\n//   const response = await axios.post(\n//     '/api/login',\n//     { password },\n//     { validateStatus: s => s === 200 || s === 401 }\n//   );\n//   const { data } = response;\n\n//   if (response.status === 200) setToken(data.token);\n\n//   return data.auth === 'ok';\n// };\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport CarbonTable from './common/CarbonTable';\nimport auth from '../services/authService';\n\nclass UnitsTable extends Component {\n  columns = [\n    {\n      path: 'fUnit',\n      label: 'Unidad',\n      content: unit => (\n        <div className=\"text-center\">\n          <Link to={`/units/${unit._id}`}>{unit.fUnit}</Link>\n        </div>\n      )\n    },\n    {\n      path: 'landlord.name',\n      label: 'Propietario',\n      content: unit =>\n        unit.landlord.name !== 'disponible' ? (\n          <Link to={`/users/${unit.landlord.userId}`}>\n            {unit.landlord.name}\n          </Link>\n        ) : (\n          unit.landlord.name\n        )\n    },\n    {\n      path: 'floor',\n      label: 'Piso',\n      content: unit => <div className=\"text-center\">{unit.floor}</div>\n    },\n    {\n      path: 'flat',\n      label: 'Rótulo',\n      content: unit => <div className=\"text-center\">{unit.flat}</div>\n    },\n    {\n      path: 'sup.covered',\n      label: 'Sup. Cubierta',\n      content: unit => (\n        <div className=\"text-center\">{unit.sup.covered.toFixed(3)}</div>\n      )\n    },\n    {\n      path: 'sup.uncovered',\n      label: 'Sup. Desc.',\n      content: unit => (\n        <div className=\"text-center\">{unit.sup.uncovered.toFixed(3)}</div>\n      )\n    },\n    {\n      path: 'sup.semi',\n      label: 'Sup. Semidesc.',\n      content: unit => (\n        <div className=\"text-center\">{unit.sup.semi.toFixed(3)}</div>\n      )\n    },\n    {\n      path: 'sup.total',\n      label: 'Sup. Total',\n      content: unit => (\n        <div className=\"text-center\">{unit.sup.total.toFixed(3)}</div>\n      )\n    },\n    {\n      path: 'coefficient',\n      label: 'Coeficiente',\n      content: unit => (\n        <div className=\"text-center\">{unit.coefficient.toFixed(3)}</div>\n      )\n    }\n  ];\n\n  deleteColumn = {\n    key: 'del',\n    content: unit => (\n      <i\n        onClick={event => this.props.onDelete(unit)}\n        className=\"fa fa-trash red clickable\"\n      />\n    )\n  };\n\n  constructor() {\n    super();\n    const currentUser = auth.getCurrentUser();\n    if (currentUser && currentUser.isAdmin)\n      this.columns.push(this.deleteColumn);\n  }\n\n  render() {\n    const { units, onSort, sortColumn } = this.props;\n    return (\n      <CarbonTable\n        columns={this.columns}\n        data={units}\n        sortColumn={sortColumn}\n        onSort={onSort}\n      />\n    );\n  }\n}\n\nexport default UnitsTable;\n","import _ from 'lodash';\n\nexport function paginate(items, pageNumber, pageSize) {\n  const startIndex = (pageNumber - 1) * pageSize;\n\n  return _(items)\n    .slice(startIndex)\n    .take(pageSize)\n    .value();\n}\n","import React, { Component } from 'react';\nimport _ from 'lodash';\nimport { getUnits, deleteUnit } from '../services/unitsService';\nimport SearchBox from './common/SearchBox';\nimport CarbonTableTitle from './common/CarbonTableTitle';\nimport CarbonTablePagination from './common/CarbonTablePagination';\nimport CarbonModal from './common/CarbonModal';\nimport Unauthorized from './common/Unauthorized';\nimport UnitsTable from './UnitsTable';\nimport auth from '../services/authService';\nimport { paginate } from '../utils/paginate';\n\nclass Units extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      units: {},\n      pageSize: 20,\n      currentPage: 1,\n      searchQuery: '',\n      sortColumn: { path: 'fUnit', order: 'asc' },\n      currentUser: auth.getCurrentUser()\n    };\n\n    this.toggleDelete = this.toggleDelete.bind(this);\n  }\n\n  async componentDidMount() {\n    const { data: units } = await getUnits();\n    this.setState({ units });\n  }\n\n  handleDelete = () => {\n    const { selectedUnit } = this.state;\n    const rollback = this.state.units;\n    const units = this.state.units.filter(u => u._id !== selectedUnit._id);\n    this.setState({ units });\n\n    try {\n      deleteUnit(selectedUnit._id);\n    } catch (ex) {\n      this.setState({ units: rollback });\n    }\n    this.toggleDelete();\n  };\n\n  toggleDelete(unit) {\n    this.setState(prevState => ({\n      modal: !prevState.modal,\n      selectedUnit: unit\n    }));\n  }\n  // handleUpdate = async unit => {\n  //   await updateUnit(unit);\n  //   const units = [...this.state.units];\n  //   const index = units.indexOf(unit);\n  //   units[index] = { ...unit };\n  //   this.setState({ units });\n  // };\n\n  handleSort = sortColumn => {\n    this.setState({ sortColumn });\n  };\n\n  handleAddUnit = () => {\n    const { history } = this.props;\n    history.push('/units/new');\n  };\n\n  handlePageSize = event => {\n    this.setState({ pageSize: event.target.value });\n  };\n\n  handlePageChange = (page, arrow, pagesCount) => {\n    const { value } = page.target;\n    let { currentPage } = this.state;\n\n    currentPage = value ? Number(value) : (currentPage += arrow);\n    if (currentPage < 1) currentPage = 1;\n    if (currentPage > pagesCount) currentPage = pagesCount;\n\n    this.setState({ currentPage });\n  };\n\n  handleSearch = query => {\n    this.setState({ searchQuery: query, currentPage: 1 });\n  };\n\n  getPageData = () => {\n    const {\n      units: allUnits,\n      pageSize,\n      currentPage,\n      sortColumn,\n      searchQuery\n    } = this.state;\n\n    let filtered = allUnits;\n\n    if (searchQuery)\n      filtered = allUnits.filter(u =>\n        u.landlord.name.toLowerCase().startsWith(searchQuery.toLowerCase())\n      );\n\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\n\n    const units = paginate(sorted, currentPage, pageSize);\n\n    return {\n      totalCount: filtered.length || 0,\n      data: units\n    };\n  };\n\n  modalBody = unit => {\n    const { fUnit, landlord } = unit;\n    if (!landlord) return null;\n    return (\n      <p className=\"lead\">\n        Se eliminará la unidad <mark>{fUnit}</mark> asignada a{' '}\n        <mark>{landlord.name}</mark>.\n      </p>\n    );\n  };\n\n  modalProps = selectedUnit => ({\n    isOpen: this.state.modal,\n    title: 'Eliminar unidad',\n    label: 'Consortia - Jose Ingenieros 1840',\n    body: selectedUnit && this.modalBody(selectedUnit),\n    cancelBtnLabel: 'Cancelar',\n    submitBtnLabel: 'Eliminar',\n    toggle: this.toggleDelete,\n    submit: this.handleDelete,\n    danger: true\n  });\n\n  render() {\n    const { pageSize, currentPage, sortColumn, searchQuery } = this.state;\n    const { currentUser, selectedUnit } = this.state;\n\n    if (currentUser && !currentUser.isCouncil) return <Unauthorized />;\n\n    const { totalCount, data: units } = this.getPageData();\n\n    return (\n      <div className=\"bx--row\">\n        <div className=\"bx--col\">\n          <CarbonModal {...this.modalProps(selectedUnit)} />\n          <CarbonTableTitle\n            title=\"Unidades\"\n            helper=\"Lista de unidades funcionales y complementarias.\"\n            btnLabel=\"Registrar unidad\"\n            btnClick={this.handleAddUnit}\n            currentUser={currentUser}\n          />\n          <SearchBox value={searchQuery} onChange={this.handleSearch} />\n          <UnitsTable\n            units={units}\n            onDelete={this.toggleDelete}\n            onSort={this.handleSort}\n            sortColumn={sortColumn}\n          />\n          <CarbonTablePagination\n            itemsCount={totalCount}\n            pageSize={pageSize}\n            currentPage={currentPage}\n            onPageSize={this.handlePageSize}\n            onPageChange={this.handlePageChange}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Units;\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport CarbonTable from './common/CarbonTable';\nimport auth from '../services/authService';\n\nclass UsersTable extends Component {\n  constructor() {\n    super();\n    this.currentUser = auth.getCurrentUser();\n    if (this.currentUser && this.currentUser.isAdmin)\n      this.columns.push(this.deleteColumn);\n  }\n\n  columns = [\n    {\n      path: 'lastname',\n      label: 'Apellido',\n      content: user => {\n        return this.currentUser.isCouncil ? (\n          <Link to={`/users/${user._id}`}>{user.lastname}</Link>\n        ) : (\n          user.lastname\n        );\n      }\n    },\n    {\n      path: 'firstname',\n      label: 'Nombre'\n    },\n    { path: 'phone', label: 'Telefono' },\n    {\n      path: 'mail',\n      label: 'Mail'\n      // content: user => <Link to={`/users/${user._id}`}>{user.mail}</Link>\n    },\n    {\n      path: 'isCouncil',\n      label: 'Consejo'\n    },\n    {\n      path: 'isLandlord',\n      label: 'Propietario'\n    }\n  ];\n\n  deleteColumn = {\n    key: 'del',\n    content: user => (\n      <i\n        onClick={event => this.props.onDelete(user)}\n        className=\"fa fa-trash red clickable\"\n      />\n    )\n  };\n\n  render() {\n    const { users, onSort, sortColumn } = this.props;\n\n    return (\n      <CarbonTable\n        columns={this.columns}\n        data={users}\n        sortColumn={sortColumn}\n        onSort={onSort}\n      />\n    );\n  }\n}\n\nexport default UsersTable;\n","import React, { Component, Fragment } from 'react';\nimport _ from 'lodash';\nimport SearchBox from './common/SearchBox';\nimport CarbonTableTitle from './common/CarbonTableTitle';\nimport CarbonTablePagination from './common/CarbonTablePagination';\nimport CarbonModal from './common/CarbonModal';\nimport UsersTable from './UsersTable';\nimport auth from '../services/authService';\nimport { getUsers, deleteUser } from '../services/usersService';\nimport { paginate } from '../utils/paginate';\n\nclass Users extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      users: {},\n      pageSize: 10,\n      currentPage: 1,\n      searchQuery: '',\n      sortColumn: { path: 'lastname', order: 'asc' },\n      modal: false\n    };\n\n    this.toggleDelete = this.toggleDelete.bind(this);\n  }\n\n  async componentDidMount() {\n    const { data: users } = await getUsers();\n    this.setState({ users, currentUser: auth.getCurrentUser() });\n  }\n\n  handleDelete = () => {\n    const { selectedUser } = this.state;\n    const rollback = this.state.users;\n    const users = this.state.users.filter(u => u._id !== selectedUser._id);\n    this.setState({ users });\n\n    try {\n      deleteUser(selectedUser._id);\n    } catch (ex) {\n      this.setState({ users: rollback });\n    }\n    this.toggleDelete();\n  };\n\n  handleSort = sortColumn => {\n    this.setState({ sortColumn });\n  };\n\n  handleAddUser = () => {\n    const { history } = this.props;\n    history.push('/register');\n  };\n\n  handlePageSize = event => {\n    this.setState({ pageSize: event.target.value });\n  };\n\n  handlePageChange = (page, arrow, pagesCount) => {\n    const { value } = page.target;\n    let { currentPage } = this.state;\n\n    currentPage = value ? Number(value) : (currentPage += arrow);\n    if (currentPage < 1) currentPage = 1;\n    if (currentPage > pagesCount) currentPage = pagesCount;\n\n    this.setState({ currentPage });\n  };\n\n  handleSearch = query => {\n    this.setState({ searchQuery: query, currentPage: 1 });\n  };\n\n  getPageData = () => {\n    const {\n      users: allUsers,\n      pageSize,\n      currentPage,\n      sortColumn,\n      searchQuery\n    } = this.state;\n\n    let filtered = allUsers;\n\n    if (searchQuery)\n      filtered = allUsers.filter(u =>\n        u.lastname.toLowerCase().startsWith(searchQuery.toLowerCase())\n      );\n\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\n\n    const users = paginate(sorted, currentPage, pageSize);\n\n    return {\n      totalCount: filtered.length || 0,\n      data: users\n    };\n  };\n\n  toggleDelete(user) {\n    this.setState(prevState => ({\n      modal: !prevState.modal,\n      selectedUser: user\n    }));\n  }\n\n  modalBody = user => {\n    const { lastname } = user;\n    return (\n      <p className=\"lead\">\n        Se eliminará el usuario <mark>{lastname}</mark>.\n      </p>\n    );\n  };\n\n  modalProps = selectedUser => ({\n    isOpen: this.state.modal,\n    title: 'Eliminar usuario',\n    label: 'Consortia - Jose Ingenieros 1840',\n    body: selectedUser && this.modalBody(selectedUser),\n    cancelBtnLabel: 'Cancelar',\n    submitBtnLabel: 'Eliminar',\n    toggle: this.toggleDelete,\n    submit: this.handleDelete,\n    danger: true\n  });\n\n  render() {\n    const { pageSize, currentPage, sortColumn, searchQuery } = this.state;\n\n    const { currentUser, selectedUser } = this.state;\n    const { totalCount, data: users } = this.getPageData();\n\n    return (\n      <Fragment>\n        <CarbonModal {...this.modalProps(selectedUser)} />\n        <CarbonTableTitle\n          title=\"Usuarios\"\n          helper=\"Lista de usuarios registrados.\"\n          btnLabel=\"Registrar usuario\"\n          btnClick={this.handleAddUser}\n          currentUser={currentUser}\n        />\n        <div className=\"bx--row\">\n          <div className=\"bx--col\">\n            <SearchBox value={searchQuery} onChange={this.handleSearch} />\n            <UsersTable\n              users={users}\n              onDelete={this.toggleDelete}\n              onSort={this.handleSort}\n              sortColumn={sortColumn}\n            />\n            <CarbonTablePagination\n              itemsCount={totalCount}\n              pageSize={pageSize}\n              currentPage={currentPage}\n              onPageSize={this.handlePageSize}\n              onPageChange={this.handlePageChange}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Users;\n","import React, { Fragment } from 'react';\nimport Joi from 'joi-browser';\nimport { toast } from 'react-toastify';\nimport Form from './common/Form';\nimport { getUser, saveUser } from '../services/usersService';\nimport auth from '../services/authService';\n\nclass UsersForm extends Form {\n  state = {\n    data: {\n      lastname: '',\n      firstname: '',\n      mail: '',\n      phone: '',\n      notes: '',\n      balance: 0,\n      isCouncil: false,\n      isLandlord: false\n    },\n    errors: {},\n    currentUser: ''\n  };\n\n  schema = {\n    _id: Joi.string(),\n    lastname: Joi.string()\n      .max(50)\n      .label('Apellido'),\n    firstname: Joi.string()\n      .max(50)\n      .label('Nombre'),\n    mail: Joi.string()\n      .min(5)\n      .max(255)\n      .email()\n      .required()\n      .label('Mail'),\n    phone: Joi.string()\n      .max(30)\n      .allow('')\n      .label('Telefono'),\n    notes: Joi.string()\n      .max(500)\n      .allow('')\n      .label('Notas'),\n    balance: Joi.number().label('Balance'),\n    isCouncil: Joi.boolean().label('Consejo'),\n    isLandlord: Joi.boolean().label('Propietario')\n  };\n\n  async populateUser() {\n    try {\n      const userId = this.props.match.params.id;\n      if (userId === 'new') return;\n      const { data: user } = await getUser(userId);\n      const currentUser = auth.getCurrentUser();\n      this.setState({ data: this.mapToViewModel(user), currentUser });\n    } catch (ex) {\n      if (ex.response && ex.response.status === 404)\n        return this.props.history.replace('/not-found');\n    }\n  }\n\n  async componentDidMount() {\n    await this.populateUser();\n  }\n\n  mapToViewModel(user) {\n    return {\n      _id: user._id,\n      lastname: user.lastname || '',\n      firstname: user.firstname || '',\n      mail: user.mail,\n      phone: user.phone || '',\n      notes: user.notes || '',\n      balance: user.balance,\n      isCouncil: user.isCouncil || false,\n      isLandlord: user.isLandlord || false\n    };\n  }\n\n  doSubmit = async () => {\n    const user = { ...this.state.data };\n\n    try {\n      await saveUser(user);\n      toast.success(`Los datos se guardaron exitosamente. ✔️`, {\n        position: 'top-center'\n      });\n    } catch (ex) {\n      console.log(ex.response.data);\n    }\n\n    const { history } = this.props;\n    history.push('/users');\n  };\n\n  columnsUnits = [\n    { path: 'fUnit', label: 'Unidad' },\n    { path: 'floor', label: 'Piso' },\n    { path: 'flat', label: 'Rótulo' },\n    {\n      path: 'sup.total',\n      label: 'Superficie',\n      content: u => (\n        <p>\n          {u.sup.total}m<sup>2</sup>\n        </p>\n      )\n    },\n    {\n      path: 'coefficient',\n      label: 'Coeficiente'\n    }\n  ];\n\n  renderAdmin(currentUser) {\n    if (!currentUser.isCouncil) return null;\n\n    return (\n      <Fragment>\n        <div className=\"bx--row\">\n          <div className=\"bx--col\">\n            {this.renderCheck('isCouncil', 'Es miembro del consejo ')}\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--col\">\n            {this.renderCheck('isLandlord', 'Es propietario')}\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const { currentUser } = this.state;\n    return (\n      <div className=\"bx--grid cc--users-form\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">\n              {this.renderInput('lastname', 'Apellido')}\n            </div>\n          </div>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">\n              {this.renderInput('firstname', 'Nombre(s)')}\n            </div>\n          </div>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">{this.renderInput('mail', 'Mail')}</div>\n          </div>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">\n              {this.renderInput('phone', 'Telefono')}\n            </div>\n          </div>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">\n              {this.renderTextArea('notes', 'Notas')}\n            </div>\n          </div>\n          {this.renderAdmin(currentUser)}\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">{this.renderButton('Guardar')}</div>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default UsersForm;\n","import _ from 'lodash';\n\nconst today = new Date();\nexport const monthLabels = [\n  'Enero',\n  'Febrero',\n  'Marzo',\n  'Abril',\n  'Mayo',\n  'Junio',\n  'Julio',\n  'Agosto',\n  'Septiembre',\n  'Octubre',\n  'Noviembre',\n  'Diciembre'\n];\n\nexport function paginate(items, pageNumber, pageSize) {\n  const startIndex = (pageNumber - 1) * pageSize;\n\n  return _(items)\n    .slice(startIndex)\n    .take(pageSize)\n    .value();\n}\n\nexport function getCurrentPeriod(e = 0) {\n  // return `${monthLabels[today.getMonth()]} ${today.getFullYear()}`;\n  const month = monthLabels[today.getMonth() - e];\n  const year = today.getFullYear() - (month === 'Diciembre' ? 1 : 0);\n\n  return {\n    year,\n    month\n  };\n}\n\nexport function getPeriod(day, minus) {\n  return `${monthLabels[day.getMonth() - minus]} ${day.getFullYear()}`;\n}\n\nexport function getLastPeriod(day) {\n  return `${monthLabels[day.getMonth() - 1]} ${day.getFullYear()}`;\n}\n\nexport function getLastXMonths(n = 12, e = 0) {\n  let d;\n  let xMonths = [];\n\n  for (let i = 0 + e; i < n; i += 1) {\n    d = new Date(today.getFullYear(), today.getMonth() - i, 1);\n    let period = `${monthLabels[d.getMonth()]} ${d.getFullYear()}`;\n    xMonths.push(period);\n  }\n  return xMonths;\n}\n\nexport function getLastXYears(n = 12) {\n  let d;\n  let xMonths = [];\n\n  for (let i = 0; i < n; i += 1) {\n    d = new Date(today.getFullYear() - i, today.getMonth(), 1);\n    let period = `${d.getFullYear()}`;\n    xMonths.push(period);\n  }\n  return xMonths;\n}\n\nexport function formatDate(date) {\n  // let options = {\n  //   weekday: 'long',\n  //   year: 'numeric',\n  //   month: 'long',\n  //   day: 'numeric'\n  // };\n  return new Date(date).toLocaleDateString('en-GB'); // 9/17/2016\n}\n\nexport default {\n  paginate,\n  getCurrentPeriod,\n  getLastXMonths,\n  getLastXYears,\n  getPeriod,\n  formatDate,\n  monthLabels\n};\n","// Create our number formatter.\nexport function currency(ammount) {\n  const formatter = new Intl.NumberFormat('es-AR', {\n    style: 'currency',\n    currency: 'ARS'\n  });\n  return formatter.format(ammount);\n}\n","import React, { Component } from 'react';\nimport CarbonTable from './common/CarbonTable';\nimport auth from '../services/authService';\nimport { formatDate } from '../utils/dates';\nimport { currency } from '../utils/formatter';\n\nclass ExpensesTable extends Component {\n  columns = [\n    {\n      path: 'concept',\n      label: 'Concepto'\n    },\n    {\n      path: 'period',\n      label: 'Periodo',\n      content: expense => <div className=\"text-center\">{expense.period}</div>\n    },\n    {\n      path: 'category',\n      label: 'Categoría',\n      content: expense => <div className=\"text-center\">{expense.category}</div>\n    },\n    {\n      path: 'type',\n      label: 'Tipo',\n      content: expense => <div className=\"text-center\">{expense.type}</div>\n    },\n    {\n      path: 'ammount',\n      label: 'Importe',\n      content: expense => (\n        <div className=\"text-right\">{currency(expense.ammount)}</div>\n      )\n    },\n    {\n      path: 'date',\n      label: 'Fecha',\n      content: expense => (\n        <div className=\"text-center\">{formatDate(expense.date)}</div>\n      )\n    },\n    {\n      path: 'userId',\n      label: 'Registrante',\n      content: expense => (\n        <div className=\"text-center\">{expense.userId.lastname}</div>\n      )\n    }\n  ];\n\n  deleteColumn = {\n    key: 'del',\n    content: expense => (\n      <i\n        onClick={event => this.props.onDelete(expense)}\n        className=\"fa fa-trash red\"\n      />\n    )\n  };\n\n  constructor() {\n    super();\n    const currentUser = auth.getCurrentUser();\n    if (currentUser && currentUser.isAdmin)\n      this.columns.push(this.deleteColumn);\n  }\n\n  render() {\n    const { expenses, onSort, sortColumn } = this.props;\n\n    return (\n      <CarbonTable\n        columns={this.columns}\n        data={expenses}\n        sortColumn={sortColumn}\n        onSort={onSort}\n      />\n    );\n  }\n}\n\nexport default ExpensesTable;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\n\nconst Pagination = ({ itemsCount, pageSize, currentPage, onPageChange }) => {\n  const pagesCount = Math.ceil(itemsCount / pageSize);\n  const pages = _.range(1, pagesCount + 1);\n\n  if (pagesCount === 1) return null;\n\n  return (\n    <nav>\n      <ul className=\"pagination\">\n        {pages.map(page => (\n          <li\n            className={page === currentPage ? 'page-item active' : 'page-item'}\n            key={page}\n          >\n            <button className=\"page-link\" onClick={() => onPageChange(page)}>\n              {page}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  );\n};\n\nPagination.propTypes = {\n  itemsCount: PropTypes.number.isRequired,\n  pageSize: PropTypes.number.isRequired,\n  currentPage: PropTypes.number.isRequired,\n  onPageChange: PropTypes.func.isRequired\n};\n\nexport default Pagination;\n","import http from './httpService';\n\nconst apiEndpoint = '/expenses';\n\nfunction expUrl(id) {\n  return `${apiEndpoint}/${id}`;\n}\n\nexport async function getTotalExpenses(period) {\n  const { data } = await http.get(`${apiEndpoint}/period/${period}`);\n\n  let totalA = 0;\n  let totalB = 0;\n  data.length !== 0 &&\n    data !== null &&\n    data.forEach(element => {\n      if (element._id === 'A') totalA = element.total;\n      if (element._id === 'B') totalB = element.total;\n    });\n\n  return { totalA, totalB };\n}\n\nexport function getExpenses() {\n  return http.get(apiEndpoint);\n}\nexport function getExpensesByPeriod(period) {\n  return http.get(`${apiEndpoint}/period/${period}`);\n}\n\nexport function getExpensesTotalByPeriod(period) {\n  return http.get(`${apiEndpoint}/total/${period}`);\n}\n\nexport function getExpense(expId) {\n  return http.get(expUrl(expId));\n}\n\nexport function deleteExpense(expId) {\n  return http.delete(expUrl(expId));\n}\n\nexport function saveExpense(exp) {\n  if (exp._id) {\n    const body = { ...exp };\n    delete body._id;\n    return http.put(expUrl(exp._id), body);\n  }\n  return http.post(apiEndpoint, exp);\n}\n","import React, { Component } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport _ from 'lodash';\nimport ExpensesTable from './ExpensesTable';\nimport Pagination from './common/Pagination';\nimport auth from '../services/authService';\nimport { getExpenses, deleteExpense } from '../services/expensesService';\nimport { paginate } from '../utils/paginate';\nimport { getCurrentPeriod } from '../utils/dates';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass CurrentMonth extends Component {\n  state = {\n    expenses: {},\n    pageSize: 15,\n    currentPage: 1,\n    searchQuery: '',\n    selectedPeriod: null,\n    sortColumn: { path: 'type', order: 'asc' },\n    year: getCurrentPeriod().year,\n    month: getCurrentPeriod().month\n  };\n\n  async componentDidMount() {\n    //populate expenses of current month\n    //populate payments of current month\n    const { data: expenses } = await getExpenses();\n    this.setState({ expenses, user: auth.getCurrentUser() });\n  }\n\n  handleDelete = expense => {\n    const rollback = this.state.expenses;\n    const expenses = this.state.expenses.filter(u => u._id !== expense._id);\n    this.setState({ expenses });\n\n    try {\n      deleteExpense(expense._id);\n    } catch (ex) {\n      if (ex.response && ex.response.status === 404) {\n        toast('Something failed!');\n        this.setState({ expenses: rollback });\n      }\n    }\n  };\n\n  handleSort = sortColumn => {\n    this.setState({ sortColumn });\n  };\n\n  handlePageChange = page => {\n    this.setState({ currentPage: page });\n  };\n\n  getPageData = () => {\n    const {\n      expenses: allExpenses,\n      pageSize,\n      currentPage,\n      sortColumn\n    } = this.state;\n\n    let filtered = allExpenses;\n\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\n    const expenses = paginate(sorted, currentPage, pageSize);\n\n    return {\n      totalCount: filtered.length || 0,\n      data: expenses\n    };\n  };\n\n  render() {\n    const { pageSize, currentPage, sortColumn } = this.state;\n    const { user } = this.state;\n\n    if (user && !user.isAdmin)\n      return (\n        <div className=\"alert alert-danger\" role=\"alert\">\n          Acceso no autorizado.\n        </div>\n      );\n\n    const { totalCount, data: expenses } = this.getPageData();\n\n    const period = `${getCurrentPeriod().month} ${getCurrentPeriod().year} `;\n    return (\n      <React.Fragment>\n        <div className=\"row\">\n          <h3>\n            {period}\n            <small className=\"text-muted\"> expensas</small>\n          </h3>\n        </div>\n        <div className=\"row\">\n          <div className=\"col\">\n            <ToastContainer />\n            <p className=\"h6\">Detalle de Gastos</p>\n            <ExpensesTable\n              expenses={expenses}\n              onDelete={this.handleDelete}\n              onSort={this.handleSort}\n              sortColumn={sortColumn}\n              viewOnly={true}\n            />\n            <Pagination\n              itemsCount={totalCount}\n              pageSize={pageSize}\n              currentPage={currentPage}\n              onPageChange={this.handlePageChange}\n            />\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col\" />\n          <div className=\"col\" />\n        </div>\n        <div className=\"row\">\n          <div className=\"col\">Saldo Ordinario</div>\n          <div className=\"col\">\n            <span className=\"badge badge-info\">New</span>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col\">Recaudación Expensas Ordinarias</div>\n          <div className=\"col\">\n            <span className=\"badge badge-info\">New</span>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col\">Erogaciones</div>\n          <div className=\"col\">\n            <span className=\"badge badge-danger\">New</span>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col\">Nuevo Saldo Ordinario</div>\n          <div className=\"col\">\n            <span className=\"badge badge-primary\">New</span>\n          </div>\n        </div>\n        <div className=\"row\" />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default CurrentMonth;\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport CarbonTable from './common/CarbonTable';\nimport auth from '../services/authService';\nimport { currency } from '../utils/formatter';\n\nclass PeriodsTable extends Component {\n  constructor() {\n    super();\n    this.currentUser = auth.getCurrentUser();\n    if (this.currentUser && this.currentUser.isAdmin)\n      this.columns.push(this.deleteColumn);\n  }\n\n  columns = [\n    {\n      path: 'period',\n      label: 'Periodo',\n      content: period => {\n        return this.currentUser.isCouncil ? (\n          <Link to={`/periods/${period._id}`}>{period.period}</Link>\n        ) : (\n          period.period\n        );\n      }\n    },\n    {\n      path: 'totalA',\n      label: 'Expensas A',\n      content: p => <div className=\"text-right\">{currency(p.expensesA)}</div>\n    },\n    {\n      path: 'totalIncome',\n      label: 'Ingresos A',\n      content: p => <div className=\"text-right\">{currency(p.incomeA)}</div>\n    },\n    {\n      path: 'balanceA',\n      label: 'Saldo A',\n      content: p => (\n        <div\n          className={`text-right ${\n            p.balanceA > 0 ? 'table-success' : 'table-danger'\n          }`}\n        >\n          {currency(p.balanceA)}\n        </div>\n      )\n    },\n    {\n      path: 'totalB',\n      label: 'Expensas B',\n      content: p => <div className=\"text-right\">{currency(p.expensesB)}</div>\n    },\n    {\n      path: 'totalExpenses',\n      label: 'Ingresos B',\n      content: p => <div className=\"text-right\">{currency(p.incomeB)}</div>\n    },\n    {\n      path: 'balanaceB',\n      label: 'Saldo B',\n      content: p => (\n        <div\n          className={`text-right ${\n            p.balanceB > 0 ? 'table-success' : 'table-danger'\n          }`}\n        >\n          {currency(p.balanceB)}\n        </div>\n      )\n    },\n    {\n      path: 'balance',\n      label: 'Saldo Total',\n      content: p => (\n        <div\n          className={`text-right ${\n            p.balance > 0 ? 'table-success' : 'table-danger'\n          }`}\n        >\n          {currency(p.balance)}\n        </div>\n      )\n    },\n    {\n      path: 'isClosed',\n      label: 'Cerrado',\n      key: 'cls',\n      content: p => (\n        <div className=\"text-center\">\n          <i\n            className={`fa ${\n              p.isClosed ? 'fa fa-check-square-o' : 'fa fa-square-o'\n            }`}\n            aria-hidden=\"true\"\n            onClick={event => this.props.onClosePeriod(p)}\n          />\n        </div>\n      )\n    }\n  ];\n\n  deleteColumn = {\n    key: 'del',\n    content: period => (\n      <i\n        onClick={event => this.props.onDelete(period)}\n        className=\"fa fa-trash red clickable\"\n      />\n    )\n  };\n\n  render() {\n    const { periods, onSort, sortColumn } = this.props;\n\n    return (\n      <CarbonTable\n        columns={this.columns}\n        data={periods}\n        sortColumn={sortColumn}\n        onSort={onSort}\n      />\n    );\n  }\n}\n\nexport default PeriodsTable;\n","import http from './httpService';\n\nconst apiEndpoint = '/periods';\n\nfunction url(id) {\n  return `${apiEndpoint}/${id}`;\n}\n\nexport function getPeriods() {\n  return http.get(apiEndpoint);\n}\n\nexport function getPeriod(periodId) {\n  return http.get(url(periodId));\n}\n\nexport function deletePeriod(periodId) {\n  return http.delete(url(periodId));\n}\n\nexport function savePeriod(period) {\n  const body = { ...period };\n  delete body._id;\n  return http.put(url(period._id), body);\n}\n\nexport function initPeriod(period) {\n  return http.post(apiEndpoint, period);\n}\n","import React, { Component, Fragment } from 'react';\nimport { toast } from 'react-toastify';\nimport _ from 'lodash';\nimport SearchBox from './common/SearchBox';\nimport CarbonTableTitle from './common/CarbonTableTitle';\nimport CarbonTablePagination from './common/CarbonTablePagination';\nimport CarbonModal from './common/CarbonModal';\nimport auth from '../services/authService';\nimport PeriodsTable from './PeriodsTable';\nimport {\n  getPeriods,\n  deletePeriod,\n  savePeriod\n} from '../services/periodsService.js';\nimport { paginate } from '../utils/paginate';\nimport { getLastXMonths, getLastPeriod } from '../utils/dates';\nimport Select from './common/Select';\n\nclass Periods extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      periods: [],\n      pageSize: 10,\n      currentPage: 1,\n      searchQuery: '',\n      delModal: false,\n      newModal: false,\n      clsModal: false,\n      sortColumn: { path: 'date', order: 'dec' },\n      period: getLastPeriod(new Date())\n    };\n\n    this.toggleDelete = this.toggleDelete.bind(this);\n    this.toggleNewPeriod = this.toggleNewPeriod.bind(this);\n    this.toggleClsPeriod = this.toggleClsPeriod.bind(this);\n  }\n\n  toggleDelete(period) {\n    this.setState(prevState => ({\n      delModal: !prevState.delModal,\n      selectedPeriod: period\n    }));\n  }\n\n  toggleNewPeriod() {\n    this.setState(prevState => ({\n      newModal: !prevState.newModal\n    }));\n  }\n\n  toggleClsPeriod(period) {\n    this.setState(prevState => ({\n      clsModal: !prevState.clsModal,\n      selectedPeriod: period\n    }));\n  }\n\n  async componentDidMount() {\n    const { data: periods } = await getPeriods();\n\n    this.setState({ periods, currentUser: auth.getCurrentUser() });\n  }\n\n  handleDelete = period => {\n    const { selectedPeriod } = this.state;\n    const { periods: rollback } = this.state;\n\n    const periods = this.state.periods.filter(\n      u => u._id !== selectedPeriod._id\n    );\n\n    this.setState({ periods });\n\n    try {\n      deletePeriod(selectedPeriod._id);\n    } catch (ex) {\n      this.setState({ expenses: rollback });\n    }\n    this.toggleDelete();\n  };\n\n  handleSort = sortColumn => {\n    this.setState({ sortColumn });\n  };\n\n  handleNewPeriod = () => {\n    const { period, periods } = this.state;\n\n    if (periods.find(p => p.period === period)) {\n      toast.error(`⚠️ El período ya ha sido iniciado.`);\n      this.toggleNewPeriod();\n      return;\n    }\n\n    this.toggleNewPeriod();\n    const { history } = this.props;\n    history.push(`/periods/new/${period}`);\n  };\n\n  handleClsPeriod = async () => {\n    const { periods: rollback } = this.state;\n    const { selectedPeriod, periods } = this.state;\n\n    try {\n      const period = this.mapToMongoModel({ ...selectedPeriod });\n      const item = periods.find(d => d._id === period._id);\n\n      if (item.isClosed)\n        throw new Error('⚠️ Un período cerrado no puede reabrirse.');\n\n      item.isClosed = !item.isClosed;\n      period.isClosed = item.isClosed;\n      await savePeriod(period);\n    } catch (ex) {\n      toast.error(ex.message);\n      this.setState({ periods: rollback });\n    }\n    this.toggleClsPeriod(selectedPeriod);\n  };\n\n  mapToMongoModel(period) {\n    //DEpopulate userId\n    delete period.date;\n    delete period.__v;\n    delete period.balanceA;\n    delete period.balanceB;\n    delete period.balance;\n    period.userId = period.userId._id;\n    return period;\n  }\n\n  handlePageSize = event => {\n    this.setState({ pageSize: event.target.value });\n  };\n\n  handlePageChange = (page, arrow, pagesCount) => {\n    const { value } = page.target;\n    let { currentPage } = this.state;\n\n    currentPage = value ? Number(value) : (currentPage += arrow);\n    if (currentPage < 1) currentPage = 1;\n    if (currentPage > pagesCount) currentPage = pagesCount;\n\n    this.setState({ currentPage });\n  };\n\n  handleSearch = query => {\n    this.setState({ searchQuery: query, currentPage: 1 });\n  };\n\n  getPageData = () => {\n    const {\n      periods: allPeriods,\n      pageSize,\n      currentPage,\n      sortColumn,\n      searchQuery\n    } = this.state;\n\n    if (!allPeriods) return;\n\n    let filtered = allPeriods;\n\n    filtered.map((period, ind) => {\n      period.balanceA = period.incomeA - period.expensesA;\n      period.balanceB = period.incomeB - period.expensesB;\n      period.balance = period.balanceA + period.balanceB;\n      return null;\n    });\n\n    if (searchQuery) {\n      filtered = allPeriods.filter(u =>\n        u.period.toLowerCase().startsWith(searchQuery.toLowerCase())\n      );\n    }\n\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\n    const periods = paginate(sorted, currentPage, pageSize);\n    return {\n      totalCount: filtered.length || 0,\n      data: periods\n    };\n  };\n\n  handleChange = ({ currentTarget: input }) => {\n    this.setState({ period: input.value });\n  };\n\n  modalBodyNew = period => {\n    return (\n      <Fragment>\n        <p className=\"lead\">Se dará inicio al período indicado:</p>\n        <Select\n          name={period}\n          value={period}\n          label=\"Período\"\n          options={getLastXMonths(12, 1)}\n          onChange={this.handleChange}\n        />\n      </Fragment>\n    );\n  };\n\n  modalPropsNew = () => {\n    const { period, newModal } = this.state;\n    return {\n      isOpen: newModal,\n      title: 'Inicio de período',\n      label: 'Consortia - Jose Ingenieros 1840',\n      body: this.modalBodyNew(period),\n      cancelBtnLabel: 'Cancelar',\n      submitBtnLabel: 'Iniciar',\n      toggle: this.toggleNewPeriod,\n      submit: this.handleNewPeriod\n    };\n  };\n\n  modalBodyDel = period => {\n    return <p className=\"lead\">Se eliminará el período {period}</p>;\n  };\n\n  modalPropsDel = () => {\n    const { period, delModal } = this.state;\n    return {\n      isOpen: delModal,\n      title: 'Eliminar período',\n      label: 'Consortia - Jose Ingenieros 1840',\n      body: this.modalBodyDel(period),\n      cancelBtnLabel: 'Cancelar',\n      submitBtnLabel: 'Eliminar',\n      toggle: this.toggleDelete,\n      submit: this.handleDelete,\n      danger: true\n    };\n  };\n\n  modalBodyClose = period => {\n    return (\n      <p className=\"lead\">\n        Se cerrará el periodo <mark>{period}</mark>. De existir alguna expensa\n        sin pagar se registará la deuda correspondiente, y se actualizarán los\n        saldos del consorcio.\n      </p>\n    );\n  };\n\n  modalPropsClose = () => {\n    const { period, clsModal } = this.state;\n    return {\n      isOpen: clsModal,\n      title: 'Cerrar período',\n      label: 'Consortia - Jose Ingenieros 1840',\n      body: this.modalBodyClose(period),\n      cancelBtnLabel: 'Cerrar',\n      submitBtnLabel: 'Eliminar',\n      toggle: this.toggleClsPeriod,\n      submit: this.handleClsPeriod,\n      danger: true\n    };\n  };\n\n  render() {\n    const { user } = this.state;\n    if (user && !user.isAdmin)\n      return (\n        <div className=\"alert alert-danger\" role=\"alert\">\n          Acceso no autorizado.\n        </div>\n      );\n\n    const { currentUser } = this.state;\n    const { pageSize, currentPage, sortColumn, searchQuery } = this.state;\n    const { totalCount, data: periods } = this.getPageData();\n\n    return (\n      <Fragment>\n        <CarbonModal {...this.modalPropsNew()} />\n        <CarbonModal {...this.modalPropsDel()} />\n        <CarbonModal {...this.modalPropsClose()} />\n        <div className=\"bx--row\">\n          <div className=\"bx--col\">\n            <CarbonTableTitle\n              title=\"Expensas\"\n              helper=\"Lista de liquidaciones de expensas registradas.\"\n              btnLabel=\"Iniciar período\"\n              btnClick={this.toggleNewPeriod}\n              currentUser={currentUser}\n            />\n            <SearchBox value={searchQuery} onChange={this.handleSearch} />\n            <PeriodsTable\n              periods={periods}\n              onDelete={this.toggleDelete}\n              onClosePeriod={this.toggleClsPeriod}\n              onSort={this.handleSort}\n              sortColumn={sortColumn}\n            />\n            <CarbonTablePagination\n              itemsCount={totalCount}\n              pageSize={pageSize}\n              currentPage={currentPage}\n              onPageSize={this.handlePageSize}\n              onPageChange={this.handlePageChange}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Periods;\n","import React from 'react';\nimport _ from 'lodash';\nimport { currency } from '../utils/formatter';\n\nconst ExpensesStats = ({ expenses, period }) => {\n  // const { data } = expenses;\n  const expA = expenses.filter(e => e.type === 'A');\n  const expB = expenses.filter(e => e.type === 'B');\n\n  const sorted = _.orderBy(expA, ['category'], ['asc']);\n  const grouped = _.groupBy(sorted, 'category');\n\n  const totalA = sorted.reduce((acum, current) => (acum += current.ammount), 0);\n  const totalB = expB.reduce((acum, current) => (acum += current.ammount), 0);\n\n  return (\n    <React.Fragment>\n      <div className=\"\">\n        <table className=\"table table-sm table-hover table-14\">\n          <thead>\n            <tr>\n              <th scope=\"col\">{`Detalle de gastos ordinarios ${period}`}</th>\n              <th scope=\"col\" className=\"text-right\">\n                Totales\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {Object.keys(grouped).map((key, ind) => {\n              const subtotal = grouped[key].reduce(\n                (acum, current) => (acum += current.ammount),\n                0\n              );\n              return (\n                <React.Fragment key={ind}>\n                  <tr>\n                    <td>\n                      <strong>{key}</strong>\n                    </td>\n                    <td />\n                  </tr>\n                  {grouped[key].map((exp, ind) => {\n                    return (\n                      <tr key={ind}>\n                        <td>{exp.concept}</td>\n                        <td className=\"text-right\">{currency(exp.ammount)}</td>\n                      </tr>\n                    );\n                  })}\n                  <tr>\n                    <td>\n                      <mark>\n                        <em>{`Total ${key}`}</em>\n                      </mark>\n                    </td>\n                    <td className=\"text-right\">\n                      <mark>\n                        <em>{currency(subtotal)}</em>\n                      </mark>\n                    </td>\n                  </tr>\n                </React.Fragment>\n              );\n            })}\n            <tr className=\"table-secondary\">\n              <td>\n                <strong>\n                  <em>{`Total gastos ordinarios`}</em>\n                </strong>\n              </td>\n              <td className=\"text-right\">\n                <strong>\n                  <em>{currency(totalA)}</em>\n                </strong>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <table className=\"table table-sm table-hover table-14\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Detalle de gastos extraordinarios</th>\n              <th scope=\"col\" />\n            </tr>\n          </thead>\n          <tbody>\n            {expB.map((exp, ind) => {\n              return (\n                <tr key={ind}>\n                  <td>{exp.concept}</td>\n                  <td className=\"text-right\">{currency(exp.ammount)}</td>\n                </tr>\n              );\n            })}\n            <tr className=\"table-secondary\">\n              <td>\n                <strong>\n                  <em>{`Total gastos extraordinarios`}</em>\n                </strong>\n              </td>\n              <td className=\"text-right\">\n                <strong>\n                  <em>{currency(totalB)}</em>\n                </strong>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <table className=\"table table-sm table-hover table-14\">\n          <tbody>\n            <tr className=\"table-primary\">\n              <td>\n                <strong>\n                  <em>{`Total gastos del período`}</em>\n                </strong>\n              </td>\n              <td className=\"text-right\">\n                <strong>\n                  <em>{currency(totalA + totalB)}</em>\n                </strong>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default ExpensesStats;\n","import React from 'react';\nimport _ from 'lodash';\nimport { currency } from '../utils/formatter';\n\nconst headers = [\n  'Unidad',\n  'Coef.',\n  'Propietario',\n  'Importe',\n  'Deuda',\n  'Interés',\n  'Importe',\n  'Deuda',\n  'Interés',\n  'Total'\n];\n\nconst ExpensesDetails = ({ details, period }) => {\n  const sorted = _.sortBy(details, 'model.label', 'asc');\n\n  const subtExpenseA = sorted.reduce(\n    (acum, current) => (acum += current.expenseA),\n    0\n  );\n  const subtDebtA = sorted.reduce(\n    (acum, current) => (acum += current.debtA),\n    0\n  );\n  const subtIntA = sorted.reduce((acum, current) => (acum += current.intA), 0);\n\n  const subtExpenseB = sorted.reduce(\n    (acum, current) => (acum += current.expenseB),\n    0\n  );\n  const subtDebtB = sorted.reduce(\n    (acum, current) => (acum += current.debtB),\n    0\n  );\n  const subtIntB = sorted.reduce((acum, current) => (acum += current.intB), 0);\n\n  const total =\n    subtExpenseA + subtDebtA + subtIntA + subtExpenseB + subtDebtB + subtIntB;\n  const totCoef = sorted.reduce(\n    (acum, current) => (acum += current.model.coefficient),\n    0\n  );\n\n  return (\n    <React.Fragment>\n      <div className=\"mt-5\">\n        <table className=\"table table-sm table-hover table-10\">\n          <caption>{`Expensas ${period}`}</caption>\n          <thead>\n            <tr>\n              <th colSpan=\"3\">{`Detalle de expensas del período ${period}`}</th>\n              <th\n                colSpan=\"3\"\n                className=\"text-monospace text-center table-active\"\n              >\n                Expensas A\n              </th>\n              <th\n                colSpan=\"3\"\n                className=\"text-monospace text-center table-secondary\"\n              >\n                Expensas B\n              </th>\n              <th />\n            </tr>\n          </thead>\n          <thead>\n            <tr>\n              {headers.map((header, ind) => (\n                <th\n                  scope=\"col\"\n                  key={ind}\n                  className=\"text-monospace text-center\"\n                >\n                  {header}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {sorted.map((d, ind) => {\n              const expenseTotal =\n                d.expenseA + d.debtA + d.intA + d.expenseB + d.debtB + d.intB;\n              return (\n                <tr key={ind}>\n                  <th scope=\"col\" className=\"text-center\">\n                    {d.model.label}\n                  </th>\n                  <td className=\"text-monospace text-center\">\n                    {Number(d.model.coefficient * 100).toFixed(2)}\n                  </td>\n                  <td>{d.model.landlord.lastname}</td>\n                  <td className=\"text-monospace text-right table-active\">\n                    {currency(d.expenseA)}\n                  </td>\n                  <td className=\"text-monospace text-right table-active\">\n                    {currency(d.debtA)}\n                  </td>\n                  <td className=\"text-monospace text-right table-active\">\n                    {currency(d.intA)}\n                  </td>\n                  <td className=\"text-monospace text-right table-secondary\">\n                    {currency(d.expenseB)}\n                  </td>\n                  <td className=\"text-monospace text-right table-secondary\">\n                    {currency(d.debtB)}\n                  </td>\n                  <td className=\"text-monospace text-right table-secondary\">\n                    {currency(d.intB)}\n                  </td>\n                  <td className=\"text-monospace text-right\">\n                    {currency(expenseTotal)}\n                  </td>\n                </tr>\n              );\n            })}\n            <tr>\n              <th scope=\"col\" className=\"text-monospace\">\n                Totales\n              </th>\n              <td>{Number(totCoef * 100).toFixed(2)}</td>\n              <td />\n              <td className=\"text-right table-active\">\n                {currency(subtExpenseA)}\n              </td>\n              <td className=\"text-right table-active\">{currency(subtDebtA)}</td>\n              <td className=\"text-right table-active\">{currency(subtIntA)}</td>\n              <td className=\"text-right table-secondary\">\n                {currency(subtExpenseB)}\n              </td>\n              <td className=\"text-right table-secondary\">\n                {currency(subtDebtB)}\n              </td>\n              <td className=\"text-right table-secondary\">\n                {currency(subtIntB)}\n              </td>\n              <td className=\"text-right\">{currency(total)}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default ExpensesDetails;\n","import React from 'react';\n\nconst ExpensesBanner = ({ consortia, period }) => {\n  const { name, mail, address } = consortia;\n  return (\n    <React.Fragment>\n      <div className=\"container mb-5\">\n        <div className=\"row\">\n          <div className=\"col text-center\">\n            <p className=\"lead h4\">Consorcio {name}</p>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col text-center table-10\">{address}</div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col text-center table-10 p-1\">{mail}</div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col text-center mt-2\">\n            <strong>{`Liquidación de expensas ${period}`}</strong>\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default ExpensesBanner;\n","import React from 'react';\nimport {\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Alert\n} from 'reactstrap';\n\nconst closeBtn = <i className=\"fa fa-times-circle\" />;\n\nconst SimpleModal = ({\n  isOpen,\n  toggle,\n  className,\n  title,\n  label,\n  action,\n  body\n}) => {\n  return (\n    <Modal isOpen={isOpen} toggle={toggle} className={className}>\n      <ModalHeader toggle={toggle} close={closeBtn} className=\"display-5\">\n        <div className=\"display-5\">{title}</div>\n      </ModalHeader>\n      <ModalBody>\n        <React.Fragment>\n          <strong>Atención</strong>\n          <i className=\"fa fa-surprise\" />\n          {body}\n          <Alert color=\"danger\">\n            <p>\n              <i className=\"fa fa-exclamation-circle mr-1\" />\n              Esta acción no se puede desahacer.\n            </p>\n          </Alert>\n        </React.Fragment>\n      </ModalBody>\n      <ModalFooter>\n        <Button\n          color={label === 'Guardar' ? 'primary' : 'danger'}\n          onClick={action}\n        >\n          {label}\n        </Button>{' '}\n        <Button color=\"secondary\" onClick={toggle}>\n          Cancelar\n        </Button>\n      </ModalFooter>\n    </Modal>\n  );\n};\n\nexport default SimpleModal;\n","import http from './httpService';\n\nconst apiEndpoint = '/pdetails';\n\nfunction url(id) {\n  return `${apiEndpoint}/${id}`;\n}\n\nexport function getPDetails() {\n  return http.get(apiEndpoint);\n}\n\nexport function getPDetailsByuserId(userId) {\n  return http.get(`${apiEndpoint}/user/${userId}`);\n}\n\nexport function getPDetailsByPeriod(period) {\n  return http.get(`${apiEndpoint}/${period}`);\n}\n\nexport function getPDetail(id) {\n  return http.get(url(id));\n}\n\nexport function deletePDetails(id) {\n  return http.delete(url(id));\n}\n\nexport function savePDetails(details) {\n  if (details._id) {\n    const body = { ...details };\n    delete body._id;\n    return http.put(url(details._id), body);\n  }\n  return http.post(apiEndpoint, details);\n}\n","import http from './httpService';\n\nconst apiEndpoint = '/consortia';\n\nfunction url(id) {\n  return `${apiEndpoint}/${id}`;\n}\n\nexport function getConsortia() {\n  return http.get(apiEndpoint);\n}\n\nexport function saveConsortia(consortia) {\n  if (consortia._id) {\n    const body = { ...consortia };\n    delete body._id;\n    return http.put(url(consortia._id), body);\n  }\n  return http.post(apiEndpoint, consortia);\n}\n","import React from 'react';\nimport Joi from 'joi-browser';\nimport html2canvas from 'html2canvas';\nimport jsPDF from 'jspdf';\nimport ExpensesStats from './ExpensesStats';\nimport ExpensesDetails from './ExpensesDetails';\nimport ExpensesBanner from './ExpensesBanner';\nimport Form from './common/Form';\nimport SimpleModal from './common/SimpleModal';\nimport { getPeriod, savePeriod, initPeriod } from '../services/periodsService';\nimport { getExpensesByPeriod } from '../services/expensesService';\nimport { getPDetailsByPeriod } from '../services/pdetailsService';\nimport { getConsortia } from '../services/consortiaService';\n\nimport auth from '../services/authService';\n\nclass PeriodsForm extends Form {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {\n        period: '',\n        userId: '',\n        expenseA: 0,\n        expenseB: 0,\n        incomeA: 0,\n        incomeB: 0,\n        isClosed: false\n      },\n      sortColumn: { path: 'model', order: 'asc' },\n      errors: {}\n    };\n    this.togglePeriod = this.togglePeriod.bind(this);\n  }\n\n  toPDF = async id => {\n    const input = document.getElementById('pdf1');\n    const canvas = await html2canvas(input);\n    const imgData = canvas.toDataURL('image/png');\n    const pdf = new jsPDF('portrait', 'mm', 'a4');\n    pdf.addImage(imgData, 'PNG', 0, 0, 210, 297);\n    pdf.addPage();\n\n    const input2 = document.getElementById('pdf2');\n    const canvas2 = await html2canvas(input2);\n    const imgData2 = canvas2.toDataURL('image/png');\n\n    pdf.addImage(imgData2, 'PNG', 0, 0, 210, 297);\n    pdf.save(`Expensas_JI1840_${this.state.period}.pdf`);\n  };\n\n  async componentDidMount() {\n    const { id, period: newPeriod } = this.props.match.params;\n\n    if (newPeriod) {\n      await this.newPeriod(newPeriod);\n    } else {\n      await this.populatePeriod(id);\n    }\n\n    const { period } = this.state.data;\n\n    const details = await this.populateDetails(period);\n    const expenses = await this.populateExpenses(period);\n    const consortia = await this.populateConsortia();\n\n    this.setState({ details, expenses, consortia });\n  }\n\n  async populateConsortia() {\n    const { data: consortia } = await getConsortia();\n    return consortia;\n  }\n\n  async populateExpenses(period) {\n    const { data: expenses } = await getExpensesByPeriod(period);\n    return expenses;\n  }\n  async populateDetails(period) {\n    const { data: details } = await getPDetailsByPeriod(period);\n    return details;\n  }\n\n  async populatePeriod(id) {\n    const { data: period } = await getPeriod(id);\n    this.setState({ data: this.mapToViewModel(period) });\n    // return this.props.history.replace('/not-found');\n  }\n\n  async newPeriod(period) {\n    const body = {\n      period: period,\n      userId: auth.getCurrentUser()._id,\n      expensesA: 0,\n      expensesB: 0,\n      incomeA: 0,\n      incomeB: 0,\n      isClosed: false\n    };\n\n    const { data: newPeriod } = await initPeriod(body);\n    this.setState({ data: this.mapToViewModel(newPeriod) });\n  }\n\n  mapToViewModel(p) {\n    return ({\n      _id: p._id,\n      period: p.period,\n      userId: p.userId,\n      expensesA: p.expensesA,\n      expensesB: p.expensesB,\n      incomeA: p.incomeA,\n      incomeB: p.incomeB,\n      isClosed: p.isClosed\n    } = p);\n  }\n\n  togglePeriod() {\n    this.setState(prevState => ({ modal: !prevState.modal }));\n  }\n\n  handleSort = sortColumn => {\n    this.setState({ sortColumn });\n  };\n\n  schema = {\n    _id: Joi.string(),\n    period: Joi.string()\n      .required()\n      .label('Periodo'),\n    userId: Joi.string()\n      .required()\n      .label('Usuario'),\n    expensesA: Joi.number()\n      .required()\n      .label('Total Expensas A'),\n    expensesB: Joi.number()\n      .required()\n      .label('Total Expensas B'),\n    incomeA: Joi.number()\n      .required()\n      .label('Total Income'),\n    incomeB: Joi.number()\n      .required()\n      .label('Total Income'),\n    isClosed: Joi.boolean().label('Cerrado')\n  };\n\n  doSubmit = () => {\n    this.togglePeriod();\n  };\n\n  handleSavePeriod = async () => {\n    const period = { ...this.state.data };\n\n    // period.isClosed = true;\n    await savePeriod(period);\n\n    this.togglePeriod();\n    const { history } = this.props;\n    history.push('/periods');\n  };\n\n  ModalPeriodBody = data => {\n    const { _id, period } = data;\n    const bodyPeriod = (\n      <p className=\"lead\">\n        Se cerrará el periodo <mark>{period}</mark>. Los usuarios que no hayan\n        registrado pagos en el período se registrarán como deudores.\n      </p>\n    );\n\n    const bodyNewPeriod = (\n      <p className=\"lead\">\n        Se iniciará el periodo <mark>{period}</mark>.\n      </p>\n    );\n\n    return _id ? bodyPeriod : bodyNewPeriod;\n  };\n\n  render() {\n    const { details, expenses, consortia, modal, data } = this.state;\n    const { _id, period } = data;\n    const saveButtonLabel = !_id ? 'Iniciar Período' : 'Cerrar Período';\n\n    if (!details || !expenses) return 'No hay información disponible';\n\n    console.log('consortia', consortia[0]);\n    return (\n      <React.Fragment>\n        <div className=\"row\">\n          <div className=\"col\">\n            <SimpleModal\n              isOpen={modal}\n              toggle={this.togglePeriod}\n              title={saveButtonLabel}\n              label={saveButtonLabel}\n              action={this.handleSavePeriod}\n              body={this.ModalPeriodBody(data)}\n            />\n            <div id=\"pdf1\" className=\"page\">\n              <ExpensesBanner consortia={consortia[0]} period={period} />\n              <ExpensesStats expenses={expenses} period={period} />\n            </div>\n            <div id=\"pdf2\" className=\"page\">\n              <ExpensesBanner consortia={consortia[0]} period={period} />\n              <ExpensesDetails details={details} period={period} />\n            </div>\n          </div>\n          <div className=\"col\">\n            <i\n              className=\"fa fa-download blue clickable\"\n              onClick={event => this.toPDF('pdf')}\n            >\n              descargar\n            </i>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default PeriodsForm;\n","import React, { Fragment } from 'react';\nimport Select from './Select';\nimport { getLastXYears, monthLabels } from '../../utils/dates';\n\nconst PeriodSelector = ({ months, years, handlePeriod }) => {\n  return (\n    <Fragment>\n      <div className=\"bx--col\">\n        <Select\n          name=\"month\"\n          value={months}\n          options={monthLabels}\n          onChange={handlePeriod}\n        />\n      </div>\n      <div className=\"bx--col\">\n        <Select\n          name=\"year\"\n          value={years}\n          options={getLastXYears(5)}\n          onChange={handlePeriod}\n        />\n      </div>\n    </Fragment>\n  );\n};\n\nexport default PeriodSelector;\n","import React, { Component, Fragment } from 'react';\nimport _ from 'lodash';\nimport SearchBox from './common/SearchBox';\nimport CarbonTableTitle from './common/CarbonTableTitle';\nimport CarbonTablePagination from './common/CarbonTablePagination';\nimport CarbonModal from './common/CarbonModal';\nimport Unauthorized from './common/Unauthorized';\nimport PeriodSelector from './common/PeriodSelector';\nimport ExpensesTable from './ExpensesTable';\nimport auth from '../services/authService';\nimport { getExpenses, deleteExpense } from '../services/expensesService';\nimport { getCurrentPeriod } from '../utils/dates';\nimport { paginate } from '../utils/paginate';\n\nclass Expenses extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      expenses: {},\n      pageSize: 10,\n      currentPage: 1,\n      searchQuery: '',\n      selectedPeriod: null,\n      sortColumn: { path: 'type', order: 'asc' },\n      year: getCurrentPeriod().year,\n      month: getCurrentPeriod().month,\n      modal: false,\n      currentUser: auth.getCurrentUser()\n    };\n    this.toggleDelete = this.toggleDelete.bind(this);\n  }\n\n  async componentDidMount() {\n    const { data: expenses } = await getExpenses();\n    this.setState({ expenses });\n  }\n\n  handleDelete = () => {\n    const { selectedExpense } = this.state;\n    const rollback = this.state.expenses;\n\n    const expenses = this.state.expenses.filter(\n      u => u._id !== selectedExpense._id\n    );\n    this.setState({ expenses });\n\n    try {\n      deleteExpense(selectedExpense._id);\n    } catch (ex) {\n      this.setState({ expenses: rollback });\n    }\n\n    this.toggleDelete();\n  };\n\n  handlePeriodSelect = event => {\n    let { year, month } = this.state;\n\n    if (event.target.name === 'year') year = event.target.value;\n    if (event.target.name === 'month') month = event.target.value;\n\n    const selectedPeriod = year && month ? `${month} ${year}` : '';\n\n    this.setState({\n      selectedPeriod,\n      searchQuery: '',\n      currentPage: 1,\n      year,\n      month\n    });\n  };\n\n  handleSort = sortColumn => {\n    this.setState({ sortColumn });\n  };\n\n  handleAddExpense = () => {\n    const { history } = this.props;\n    history.push('/expenses/new');\n  };\n\n  handlePageSize = event => {\n    this.setState({ pageSize: event.target.value });\n  };\n\n  handlePageChange = (page, arrow, pagesCount) => {\n    const { value } = page.target;\n    let { currentPage } = this.state;\n\n    currentPage = value ? Number(value) : (currentPage += arrow);\n    if (currentPage < 1) currentPage = 1;\n    if (currentPage > pagesCount) currentPage = pagesCount;\n\n    this.setState({ currentPage });\n  };\n\n  handleSearch = query => {\n    this.setState({ searchQuery: query, selectedPeriod: null, currentPage: 1 });\n  };\n\n  getPageData = () => {\n    const {\n      expenses: allExpenses,\n      pageSize,\n      currentPage,\n      sortColumn,\n      selectedPeriod,\n      searchQuery\n    } = this.state;\n\n    let filtered = allExpenses;\n\n    if (searchQuery)\n      filtered = allExpenses.filter(u =>\n        u.concept.toLowerCase().startsWith(searchQuery.toLowerCase())\n      );\n    else if (selectedPeriod)\n      filtered = allExpenses.filter(m => m.period === selectedPeriod);\n\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\n    const expenses = paginate(sorted, currentPage, pageSize);\n\n    return {\n      totalCount: filtered.length || 0,\n      data: expenses\n    };\n  };\n\n  toggleDelete(expense) {\n    this.setState(prevState => ({\n      modal: !prevState.modal,\n      selectedExpense: expense\n    }));\n  }\n  renderViewTags = (data, selected) => {\n    const count = data.length;\n    return (\n      <Fragment>\n        Gastos\n        <mark>{count}</mark>\n        Periodo\n        <mark>{selected ? selected : 'Todos los periodos.'}</mark>\n        Importe Total\n        <mark>\n          $\n          {Number(\n            data\n              .reduce((prev, current) => (prev += current.ammount), 0)\n              .toFixed(2)\n          )}\n        </mark>\n      </Fragment>\n    );\n  };\n\n  modalBody = expense => {\n    const { concept } = expense;\n    return (\n      <p className=\"lead\">\n        Se eliminará el gasto con concepto: <mark>{concept}</mark>.\n      </p>\n    );\n  };\n\n  modalProps = selectedExpense => ({\n    isOpen: this.state.modal,\n    title: 'Eliminar gastos',\n    label: 'Consortia - Jose Ingenieros 1840',\n    body: selectedExpense && this.modalBody(selectedExpense),\n    cancelBtnLabel: 'Cancelar',\n    submitBtnLabel: 'Eliminar',\n    toggle: this.toggleDelete,\n    submit: this.handleDelete,\n    danger: true\n  });\n\n  render() {\n    const { user } = this.state;\n    if (user && !user.isAdmin)\n      return (\n        <div className=\"alert alert-danger\" role=\"alert\">\n          Acceso no autorizado.\n        </div>\n      );\n\n    const {\n      pageSize,\n      currentPage,\n      sortColumn,\n      searchQuery,\n      selectedPeriod\n    } = this.state;\n    const { month, year } = this.state;\n    const { totalCount, data: expenses } = this.getPageData();\n    const { selectedExpense, currentUser } = this.state;\n\n    if (currentUser && !currentUser.isCouncil) return <Unauthorized />;\n    return (\n      <Fragment>\n        <CarbonModal {...this.modalProps(selectedExpense)} />\n        <CarbonTableTitle\n          title=\"Gastos\"\n          helper={this.renderViewTags(expenses, selectedPeriod)}\n          btnLabel=\"Registrar gasto\"\n          btnClick={this.handleAddExpense}\n          currentUser={currentUser}\n        />\n        <div className=\"bx--grid\">\n          <div className=\"bx--row bx--no-gutter\">\n            <PeriodSelector\n              months={month}\n              years={year}\n              handlePeriod={this.handlePeriodSelect}\n            />\n            <div className=\"bx--col-sm-1 bx--col-md-2 bx--col-lg-6\">\n              <SearchBox value={searchQuery} onChange={this.handleSearch} />\n            </div>\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--col\">\n            <ExpensesTable\n              expenses={expenses}\n              onDelete={this.toggleDelete}\n              onSort={this.handleSort}\n              sortColumn={sortColumn}\n            />\n            <CarbonTablePagination\n              itemsCount={totalCount}\n              pageSize={pageSize}\n              currentPage={currentPage}\n              onPageSize={this.handlePageSize}\n              onPageChange={this.handlePageChange}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Expenses;\n","import React from 'react';\n\nconst BtnAux = ({ label, onClick }) => {\n  return (\n    <button\n      className=\"bx--btn bx--btn--sm bx--btn--secondary\"\n      onClick={onClick}\n      type=\"button\"\n    >\n      {` ${label}`}\n      <svg\n        focusable=\"false\"\n        preserveAspectRatio=\"xMidYMid meet\"\n        style={{ willChange: 'transform' }}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        className=\"bx--btn__icon\"\n        width=\"20\"\n        height=\"20\"\n        viewBox=\"0 0 32 32\"\n        aria-hidden=\"true\"\n      >\n        <path d=\"M17 15V7h-2v8H7v2h8v8h2v-8h8v-2h-8z\" />\n      </svg>\n    </button>\n  );\n};\n\nexport default BtnAux;\n","import http from './httpService';\n\nconst apiEndpoint = '/pmodels';\n\nfunction supUrl(id) {\n  return `${apiEndpoint}/${id}`;\n}\n\nexport function getModels() {\n  return http.get(apiEndpoint);\n}\n\nexport function getModel(supId) {\n  return http.get(supUrl(supId));\n}\n\nexport function deleteModel(supId) {\n  return http.delete(supUrl(supId));\n}\n\nexport function saveModel(sup) {\n  if (sup._id) {\n    const body = { ...sup };\n    delete body._id;\n    return http.put(supUrl(sup._id), body);\n  }\n  return http.post(apiEndpoint, sup);\n}\n","import React, { Fragment } from 'react';\nimport Joi from 'joi-browser';\nimport { toast } from 'react-toastify';\nimport Form from './common/Form';\nimport BtnAux from './common/BtnAux';\nimport { getExpense, saveExpense } from '../services/expensesService';\nimport { getModels } from '../services/pmodelsServices';\nimport { getLastXMonths, getPeriod } from '../utils/dates';\nimport auth from '../services/authService';\n\nclass ExpensesForm extends Form {\n  state = {\n    data: {\n      category: '',\n      concept: '',\n      type: '',\n      ammount: 0,\n      period: getPeriod(new Date()),\n      excluded: [],\n      selectedEx: ''\n    },\n    models: [],\n    errors: {},\n    keys: {}\n  };\n\n  typeOptions = ['A', 'B'];\n\n  categoryOptions = [\n    'Mantenimiento',\n    'Servicios',\n    'Impuestos',\n    'Honorarios',\n    'Abonos',\n    'Generales'\n  ];\n\n  schema = {\n    _id: Joi.string(),\n    category: Joi.string().label('Rubro'),\n    concept: Joi.string()\n      .required()\n      .label('Concepto'),\n    type: Joi.string()\n      .valid('A', 'B')\n      .required()\n      .label('Tipo'),\n    ammount: Joi.number()\n      .required()\n      .label('Importe'),\n    excluded: Joi.array(),\n    selectedEx: Joi.string().allow(''),\n    period: Joi.string()\n      .required()\n      .label('Mes')\n  };\n\n  async populateExpenses() {\n    try {\n      const expenseId = this.props.match.params.id;\n      if (expenseId === 'new') {\n        // const data = { period: ) };\n        // this.setState({ data });\n        return;\n      }\n      const { data: expense } = await getExpense(expenseId);\n      const currentUser = auth.getCurrentUser();\n      this.setState({ data: this.mapToViewModel(expense), currentUser });\n    } catch (ex) {\n      if (ex.response && ex.response.status === 404)\n        return this.props.history.replace('/not-found');\n    }\n  }\n\n  async populateModels() {\n    const { data: models } = await getModels();\n    this.setState({ models });\n  }\n  async componentDidMount() {\n    await this.populateExpenses();\n    await this.populateModels();\n  }\n\n  mapToViewModel(expense) {\n    return {\n      _id: expense._id,\n      category: expense.category,\n      concept: expense.concept,\n      type: expense.type,\n      ammount: expense.ammount,\n      excluded: expense.excluded,\n      period: expense.period,\n      selectedEx: 'DUMMY-EX'\n    };\n  }\n\n  doSubmit = async () => {\n    const expense = { ...this.state.data };\n    const { _id } = auth.getCurrentUser();\n    try {\n      expense.userId = _id;\n      delete expense.selectedEx;\n      await saveExpense(expense);\n      toast.success(`Los datos se guardaron exitosamente. ✔️`, {\n        position: 'top-center'\n      });\n    } catch (ex) {\n      console.log(ex.response.data);\n    }\n\n    const { history } = this.props;\n    history.push('/expenses');\n  };\n\n  addExcluded(selected) {\n    const { excluded: newExcluded } = this.state.data;\n    const newState = { ...this.state };\n\n    const newEx = newExcluded.find(e => e === selected);\n    if (newEx) return;\n\n    newExcluded.push(selected);\n    newState.data.excluded = newExcluded;\n    this.setState({ ...newState });\n  }\n\n  getLabel(id) {\n    const { models } = this.state;\n    if (models.length === 0) return;\n    return models.find(m => m._id === id).label;\n  }\n\n  delEx = event => {\n    const { excluded } = this.state.data;\n    const newState = { ...this.state };\n\n    const newExcluded = excluded.filter(e => e !== event.target.id);\n    newState.data.excluded = newExcluded;\n    this.setState({ ...newState });\n  };\n\n  renderExcluded(excluded) {\n    if (excluded.length === 0) return;\n    return excluded.map((v, i) => (\n      <span key={v} className=\"cc--m5\">\n        <i\n          key={v}\n          id={v}\n          className=\"fa fa-minus-circle clickable\"\n          onClick={event => this.delEx(event)}\n        />{' '}\n        {this.getLabel(v)}\n      </span>\n    ));\n  }\n\n  render() {\n    const { models } = this.state;\n    const { excluded } = this.state.data;\n    const { selectedExKey } = this.state.keys;\n\n    return (\n      <div className=\"bx--grid cc--users-form\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">\n              {this.renderInput('concept', 'Concepto')}\n            </div>\n          </div>\n          <div className=\"bx--row\">\n            <div className=\"bx--col bx--col-sm-3\">\n              {this.renderInput('ammount', 'Importe')}\n            </div>\n\n            <div className=\"bx--col bx--col-sm-2\">\n              {this.renderSelect('type', 'Tipo', '', this.typeOptions)}\n            </div>\n            <div className=\"bx--col\">\n              {this.renderSelect('category', 'Rubro', '', this.categoryOptions)}\n            </div>\n          </div>\n          <div className=\"bx--row align-items-start\">\n            <div className=\"bx--col\">\n              {this.renderSelect('period', 'Mes', '', getLastXMonths(12))}\n            </div>\n\n            <div className=\"bx--col\">\n              {this.renderSelect('selectedEx', 'Excepciones', 'label', models)}\n              <BtnAux\n                label=\"Agregar\"\n                onClick={event => this.addExcluded(selectedExKey)}\n              />\n            </div>\n            <div className=\"bx--col\">\n              {excluded && excluded.length !== 0 && (\n                <Fragment>\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <label className=\"bx--label\">Exclusiones</label>\n                    </div>\n                  </div>\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      {this.renderExcluded(excluded)}\n                    </div>\n                  </div>\n                </Fragment>\n              )}\n            </div>\n          </div>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">{this.renderButton('Guardar')}</div>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default ExpensesForm;\n","import React, { Component } from 'react';\nimport CarbonTable from './common/CarbonTable';\nimport { currency } from '../utils/formatter';\n\nclass PeriodsDTable extends Component {\n  columns = [\n    {\n      path: 'model.label',\n      label: 'UF'\n    },\n    {\n      path: 'model.landlord.lastname',\n      label: 'Propietario',\n      content: d => <div>{`${d.model.landlord.lastname}`}</div>\n    },\n    {\n      path: 'model.coefficient',\n      label: 'Coef.',\n      content: d => (\n        <div>{`${(Number(d.model.coefficient) * 100).toFixed(3)}`}</div>\n      )\n    },\n    {\n      path: 'expenseA',\n      label: 'Exp (A)',\n      content: d => <div className=\"text-right\">{currency(d.expenseA)}</div>\n    },\n    {\n      path: 'debtA',\n      label: 'Deuda (A)',\n      content: d => <div className=\"text-right\">{currency(d.debtA)}</div>\n    },\n    {\n      path: 'intA',\n      label: 'Int (A)',\n      content: d => <div className=\"text-right\">{currency(d.intA)}</div>\n    },\n    {\n      path: 'isPayedA',\n      label: 'Pagó (A)',\n      key: 'reg',\n      content: d => (\n        <div className=\"text-center\">\n          <i\n            className={`clickable fa ${\n              d.isPayedA ? 'fa fa-check-square-o' : 'fa fa-square-o'\n            }`}\n            aria-hidden=\"true\"\n            onClick={event => this.props.onRegister(d, 'isPayedA')}\n          />\n        </div>\n      )\n    },\n    {\n      path: 'expenseB',\n      label: 'Exp. (B)',\n      content: d => <div className=\"text-right\">{currency(d.expenseB)}</div>\n    },\n    {\n      path: 'debtB',\n      label: 'Deuda (B)',\n      content: d => <div className=\"text-right\">{currency(d.debtB)}</div>\n    },\n    {\n      path: 'intB',\n      label: 'Int. (B)',\n      content: d => <div className=\"text-right\">{currency(d.intB)}</div>\n    },\n    {\n      path: 'isPayedB',\n      label: 'Pagó (B)',\n      key: 'reg',\n      content: d => (\n        <div className=\"text-center\">\n          <i\n            className={`clickable fa ${\n              d.isPayedB ? 'fa fa-check-square-o' : 'fa fa-square-o'\n            }`}\n            aria-hidden=\"true\"\n            onClick={event => this.props.onRegister(d, 'isPayedB')}\n          />\n        </div>\n      )\n    },\n    {\n      path: 'total',\n      label: 'Total',\n      content: d => (\n        <div\n          className={`text-right ${\n            (!d.isPayedA && !d.isPayedB) > 0 ? 'table-danger' : 'table-success'\n          }`}\n        >\n          {currency(d.total)}\n        </div>\n      )\n    },\n    {\n      path: 'isPayedFake',\n      label: 'Pago Total',\n      key: 'reg',\n      content: d => (\n        <div className=\"text-center\">\n          <i\n            className={`clickable fa ${\n              d.isPayedA && d.isPayedB\n                ? 'fa fa-check-square-o'\n                : 'fa fa-square-o'\n            }`}\n            aria-hidden=\"true\"\n            onClick={event => this.props.onRegister(d)}\n          />\n        </div>\n      )\n    }\n  ];\n\n  render() {\n    const { data, onSort, sortColumn } = this.props;\n    return (\n      <CarbonTable\n        columns={this.columns}\n        data={data}\n        sortColumn={sortColumn}\n        onSort={onSort}\n      />\n    );\n  }\n}\n\nexport default PeriodsDTable;\n","import React, { Component, Fragment } from 'react';\nimport _ from 'lodash';\nimport SearchBox from './common/SearchBox';\nimport CarbonTableTitle from './common/CarbonTableTitle';\nimport CarbonTablePagination from './common/CarbonTablePagination';\nimport CarbonModal from './common/CarbonModal';\nimport PeriodSelector from './common/PeriodSelector';\nimport PeriodsDTable from './PeriodsDTable';\nimport auth from '../services/authService';\nimport Unauthorized from './common/Unauthorized';\nimport { getPDetailsByPeriod, savePDetails } from '../services/pdetailsService';\nimport { getCurrentPeriod, getPeriod } from '../utils/dates';\nimport { paginate } from '../utils/paginate';\nimport { toast } from 'react-toastify';\n\nclass Payments extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pageSize: 15,\n      currentPage: 1,\n      searchQuery: '',\n      selectedPeriod: getPeriod(new Date()),\n      sortColumn: { path: 'model', order: 'asc' },\n      year: getCurrentPeriod().year,\n      month: getCurrentPeriod().month,\n      modal: false,\n      currentUser: auth.getCurrentUser()\n    };\n    this.toggleRegister = this.toggleRegister.bind(this);\n  }\n\n  async componentDidMount() {\n    const { selectedPeriod } = this.state;\n    await this.populateDetails(selectedPeriod);\n  }\n\n  async populateDetails(period) {\n    const { data: details } = await getPDetailsByPeriod(period);\n    this.setState({ details });\n  }\n\n  handlePeriodSelect = async event => {\n    let { year, month } = this.state;\n\n    if (event.target.name === 'year') year = event.target.value;\n    if (event.target.name === 'month') month = event.target.value;\n\n    const selectedPeriod = year && month ? `${month} ${year}` : '';\n\n    await this.populateDetails(selectedPeriod);\n    this.setState({\n      selectedPeriod,\n      searchQuery: '',\n      currentPage: 1,\n      year,\n      month\n    });\n  };\n\n  handlePageSize = event => {\n    this.setState({ pageSize: event.target.value });\n  };\n\n  handlePageChange = (page, arrow, pagesCount) => {\n    const { value } = page.target;\n    let { currentPage } = this.state;\n\n    currentPage = value ? Number(value) : (currentPage += arrow);\n    if (currentPage < 1) currentPage = 1;\n    if (currentPage > pagesCount) currentPage = pagesCount;\n\n    this.setState({ currentPage });\n  };\n\n  handleSearch = query => {\n    this.setState({ searchQuery: query, selectedPeriod: null, currentPage: 1 });\n  };\n\n  getPageData = () => {\n    const {\n      details: allDetails,\n      pageSize,\n      currentPage,\n      sortColumn,\n      selectedPeriod,\n      searchQuery\n    } = this.state;\n\n    let filtered = allDetails;\n\n    filtered.map(detail => {\n      const { expenseA, debtA, intA, expenseB, debtB, intB } = detail;\n      detail.total = expenseA + debtA + intA + expenseB + debtB + intB;\n      return null;\n    });\n\n    if (searchQuery) {\n      filtered = allDetails.filter(u =>\n        u.model.landlord.lastname\n          .toLowerCase()\n          .startsWith(searchQuery.toLowerCase())\n      );\n    } else if (selectedPeriod)\n      filtered = allDetails.filter(m => m.period === selectedPeriod);\n\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\n    const details = paginate(sorted, currentPage, pageSize);\n\n    return {\n      totalCount: filtered.length || 0,\n      data: details\n    };\n  };\n\n  toggleRegister(detail, key) {\n    this.setState(prevState => ({\n      modal: !prevState.modal,\n      selectedDetail: detail,\n      isPayedKey: key\n    }));\n  }\n\n  handleRegister = async () => {\n    const { details: rollback } = this.state;\n    const { selectedDetail, details, isPayedKey } = this.state;\n    try {\n      const detail = this.mapToMongoModel({ ...selectedDetail });\n\n      // Optimistic update  front-end first\n      const item = details.find(d => d._id === selectedDetail._id);\n      if (isPayedKey) {\n        item[isPayedKey] = !item[isPayedKey];\n        detail[isPayedKey] = item[isPayedKey];\n      } else {\n        const payedAB = item.isPayedA && item.isPayedB;\n\n        if (item.isPayedA === payedAB) detail.isPayedA = !payedAB;\n        if (item.isPayedB === payedAB) detail.isPayedB = !payedAB;\n\n        item.isPayedA = !payedAB;\n        item.isPayedB = !payedAB;\n      }\n\n      // DB Update\n      await savePDetails(detail);\n      toast.success(`Los datos se guardaron exitosamente. ✔️`, {\n        position: 'top-center'\n      });\n    } catch (ex) {\n      console.log(ex);\n      this.setState({ details: rollback });\n    }\n    this.toggleRegister();\n  };\n\n  mapToMongoModel(detail) {\n    //DEpopulate model & userId\n    delete detail.total;\n    delete detail.isPayedA;\n    delete detail.isPayedB;\n    detail.userId = detail.userId._id;\n    detail.model = detail.model._id;\n    return detail;\n  }\n\n  handleSortDetails = sortColumn => {\n    this.setState({ sortColumn });\n  };\n\n  modalBody = model => {\n    const { label } = model;\n    const { lastname } = model.landlord;\n    return (\n      <p className=\"lead\">\n        Se registrará el pago de expensas para <mark>{label}</mark> del\n        propietario <mark>{lastname}</mark>. Adicionalmente se actualizará el\n        saldo de ingresos del período.\n      </p>\n    );\n  };\n\n  modalProps = selectedDetail => {\n    if (!selectedDetail) return null;\n    const { modal } = this.state;\n    const { model } = selectedDetail;\n    return {\n      isOpen: modal,\n      title: 'Actualizar información de pagos',\n      label: 'Consortia - Jose Ingenieros 1840',\n      body: model && this.modalBody(model),\n      cancelBtnLabel: 'Cancelar',\n      submitBtnLabel: 'Confirmar',\n      toggle: this.toggleRegister,\n      submit: this.handleRegister\n    };\n  };\n\n  render() {\n    const { currentUser } = this.state;\n\n    if (currentUser && !currentUser.isCouncil) return <Unauthorized />;\n\n    if (!this.state.details) return 'No data available.';\n\n    const { pageSize, currentPage, searchQuery, sortColumn } = this.state;\n    const { month, year } = this.state;\n    const { selectedDetail } = this.state;\n    const { totalCount, data: details } = this.getPageData();\n\n    return (\n      <Fragment>\n        <CarbonModal {...this.modalProps(selectedDetail)} />\n        <CarbonTableTitle\n          title=\"Liquidaciones\"\n          helper=\"Lista de liquidaciones registradas.\"\n          currentUser={currentUser}\n        />\n        <div className=\"bx--row\">\n          <div className=\"bx--col\" />\n          <PeriodSelector\n            months={month}\n            years={year}\n            handlePeriod={this.handlePeriodSelect}\n          />\n          <div className=\"bx--col\">\n            <SearchBox value={searchQuery} onChange={this.handleSearch} />\n          </div>\n        </div>\n        <div className=\"bx--row\">\n          <div className=\"bx--col\">\n            <PeriodsDTable\n              data={details}\n              onRegister={this.toggleRegister}\n              onSort={this.handleSortDetails}\n              sortColumn={sortColumn}\n            />\n            <CarbonTablePagination\n              itemsCount={totalCount}\n              pageSize={pageSize}\n              currentPage={currentPage}\n              onPageChange={this.handlePageChange}\n              onPageSize={this.handlePageSize}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Payments;\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport CarbonTable from './common/CarbonTable';\nimport auth from '../services/authService';\n\nclass SuppliersTable extends Component {\n  constructor() {\n    super();\n    this.currentUser = auth.getCurrentUser();\n    if (this.currentUser && this.currentUser.isCouncil)\n      this.columns.push(this.deleteColumn);\n  }\n  columns = [\n    {\n      path: 'name',\n      label: 'Nombre',\n      content: supplier => {\n        return this.currentUser.isCouncil ? (\n          <Link to={`/suppliers/${supplier._id}`}>{supplier.name}</Link>\n        ) : (\n          supplier.name\n        );\n      }\n    },\n    {\n      path: 'category',\n      label: 'Rubro'\n    },\n    {\n      path: 'contact',\n      label: 'Contacto'\n    },\n    {\n      path: 'comments',\n      label: 'Observaciones'\n    }\n  ];\n\n  deleteColumn = {\n    key: 'del',\n    content: supplier => (\n      <i\n        onClick={event => this.props.onDelete(supplier)}\n        className=\"fa fa-trash red clickable\"\n      />\n    )\n  };\n\n  render() {\n    const { suppliers, onSort, sortColumn } = this.props;\n    return (\n      <CarbonTable\n        columns={this.columns}\n        data={suppliers}\n        sortColumn={sortColumn}\n        onSort={onSort}\n      />\n    );\n  }\n}\n\nexport default SuppliersTable;\n","import http from './httpService';\n\nconst apiEndpoint = '/suppliers';\n\nfunction supUrl(id) {\n  return `${apiEndpoint}/${id}`;\n}\n\nexport function getSuppliers() {\n  return http.get(apiEndpoint);\n}\n\nexport function getSupplier(supId) {\n  return http.get(supUrl(supId));\n}\n\nexport function deleteSupplier(supId) {\n  return http.delete(supUrl(supId));\n}\n\nexport function saveSupplier(sup) {\n  if (sup._id) {\n    const body = { ...sup };\n    delete body._id;\n    return http.put(supUrl(sup._id), body);\n  }\n  return http.post(apiEndpoint, sup);\n}\n","import React, { Component, Fragment } from 'react';\nimport _ from 'lodash';\nimport SearchBox from './common/SearchBox';\nimport CarbonTableTitle from './common/CarbonTableTitle';\nimport CarbonTablePagination from './common/CarbonTablePagination';\nimport CarbonModal from './common/CarbonModal';\nimport SuppliersTable from './SuppliersTable';\nimport auth from '../services/authService';\nimport { getSuppliers, deleteSupplier } from '../services/suppliersService';\nimport { paginate } from '../utils/paginate';\nimport { toast } from 'react-toastify';\n\nclass Suppliers extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      suppliers: {},\n      pageSize: 10,\n      currentPage: 1,\n      searchQuery: '',\n      sortColumn: { path: 'type', order: 'asc' },\n      modal: false\n    };\n    this.toggleDelete = this.toggleDelete.bind(this);\n  }\n\n  toggleDelete(supplier) {\n    this.setState(prevState => ({\n      modal: !prevState.modal,\n      selectedSupplier: supplier\n    }));\n  }\n\n  async componentDidMount() {\n    const { data: suppliers } = await getSuppliers();\n    this.setState({ suppliers, currentUser: auth.getCurrentUser() });\n  }\n\n  handleDelete = () => {\n    const { selectedSupplier } = this.state;\n    const rollback = this.state.suppliers;\n    const suppliers = this.state.suppliers.filter(\n      u => u._id !== selectedSupplier._id\n    );\n\n    this.setState({ suppliers });\n\n    try {\n      deleteSupplier(selectedSupplier._id);\n    } catch (ex) {\n      toast.error(`☹️ Error: ${ex.response.data}`);\n      this.setState({ expenses: rollback });\n    }\n    this.toggleDelete();\n  };\n\n  handleSort = sortColumn => {\n    this.setState({ sortColumn });\n  };\n\n  handleAddSuppplier = () => {\n    const { history } = this.props;\n    history.push('/suppliers/new');\n  };\n\n  handlePageChange = page => {\n    this.setState({ currentPage: page });\n  };\n\n  handleSearch = query => {\n    this.setState({ searchQuery: query, currentPage: 1 });\n  };\n\n  handlePageSize = event => {\n    this.setState({ pageSize: event.target.value });\n  };\n\n  handlePageChange = (page, arrow, pagesCount) => {\n    const { value } = page.target;\n    let { currentPage } = this.state;\n\n    currentPage = value ? Number(value) : (currentPage += arrow);\n    if (currentPage < 1) currentPage = 1;\n    if (currentPage > pagesCount) currentPage = pagesCount;\n\n    this.setState({ currentPage });\n  };\n\n  getPageData = () => {\n    const {\n      suppliers: allSuppliers,\n      pageSize,\n      currentPage,\n      sortColumn,\n      searchQuery\n    } = this.state;\n\n    let filtered = allSuppliers;\n\n    if (searchQuery) {\n      filtered = allSuppliers.filter(u =>\n        u.name.toLowerCase().startsWith(searchQuery.toLowerCase())\n      );\n    }\n\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\n    const suppliers = paginate(sorted, currentPage, pageSize);\n    return {\n      totalCount: filtered.length || 0,\n      data: suppliers\n    };\n  };\n\n  modalBody = supplier => {\n    const { name } = supplier;\n    return (\n      <p className=\"lead\">\n        Se eliminará el proveedor <mark>{name}</mark>.\n      </p>\n    );\n  };\n\n  modalProps = selectedUser => ({\n    isOpen: this.state.modal,\n    title: 'Eliminar proveedor',\n    label: 'Consortia - Jose Ingenieros 1840',\n    body: selectedUser && this.modalBody(selectedUser),\n    cancelBtnLabel: 'Cancelar',\n    submitBtnLabel: 'Eliminar',\n    toggle: this.toggleDelete,\n    submit: this.handleDelete,\n    danger: true\n  });\n\n  render() {\n    const {\n      pageSize,\n      currentPage,\n      sortColumn,\n      searchQuery,\n      selectedSupplier\n    } = this.state;\n\n    const { currentUser } = this.state;\n    const { totalCount, data: suppliers } = this.getPageData();\n\n    return (\n      <Fragment>\n        <CarbonModal {...this.modalProps(selectedSupplier)} />\n        <div className=\"bx--row\">\n          <div className=\"bx--col\">\n            <CarbonTableTitle\n              title=\"Proveedores\"\n              helper=\"Lista de proveedores registrados.\"\n              btnLabel=\"Registrar proveedor\"\n              btnClick={this.handleAddSuppplier}\n              currentUser={currentUser}\n            />\n            <SearchBox value={searchQuery} onChange={this.handleSearch} />\n            <SuppliersTable\n              suppliers={suppliers}\n              onDelete={this.toggleDelete}\n              onSort={this.handleSort}\n              sortColumn={sortColumn}\n            />\n            <CarbonTablePagination\n              itemsCount={totalCount}\n              pageSize={pageSize}\n              currentPage={currentPage}\n              onPageSize={this.handlePageSize}\n              onPageChange={this.handlePageChange}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Suppliers;\n","import React from 'react';\nimport Joi from 'joi-browser';\nimport { toast } from 'react-toastify';\nimport Form from './common/Form';\nimport { getSupplier, saveSupplier } from '../services/suppliersService';\n\nclass SuppliersForm extends Form {\n  state = {\n    data: {\n      name: '',\n      category: '',\n      contact: '',\n      comments: ''\n    },\n    errors: {}\n  };\n\n  schema = {\n    _id: Joi.string(),\n    name: Joi.string()\n      .required()\n      .label('Nombre'),\n    category: Joi.string()\n      .required()\n      .label('Rubro'),\n    contact: Joi.string()\n      .required()\n      .label('Contacto'),\n    comments: Joi.string()\n      .allow('')\n      .label('Observaciones')\n  };\n\n  async populateSuppliers() {\n    try {\n      const supplierId = this.props.match.params.id;\n      if (supplierId === 'new') return;\n      const { data: supplier } = await getSupplier(supplierId);\n      this.setState({ data: this.mapToViewModel(supplier) });\n    } catch (ex) {\n      if (ex.response && ex.response.status === 404)\n        return this.props.history.replace('/not-found');\n    }\n  }\n\n  async componentDidMount() {\n    await this.populateSuppliers();\n  }\n\n  mapToViewModel(supplier) {\n    return {\n      _id: supplier._id,\n      name: supplier.name,\n      category: supplier.category,\n      contact: supplier.contact,\n      comments: supplier.comments\n    };\n  }\n\n  doSubmit = async () => {\n    const supplier = { ...this.state.data };\n\n    try {\n      await saveSupplier(supplier);\n      console.log(supplier);\n      toast.success('Los datos se guardaron exitosamente. ✔️', {\n        position: 'top-center'\n      });\n    } catch (ex) {\n      console.log(ex.response);\n    }\n\n    const { history } = this.props;\n    history.push('/suppliers');\n  };\n\n  render() {\n    return (\n      <div className=\"bx--grid cc--users-form\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">{this.renderInput('name', 'Nombre')}</div>\n            <div className=\"bx--col\">\n              {this.renderInput('category', 'Categoria')}\n            </div>\n            <div className=\"bx--col\">\n              {this.renderInput('contact', 'Contacto')}\n            </div>\n          </div>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">\n              {this.renderTextArea('comments', 'Observaciones')}\n            </div>\n          </div>\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">{this.renderButton('Guardar')}</div>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default SuppliersForm;\n","import React from 'react';\nimport Joi from 'joi-browser';\nimport Form from './common/Form';\nimport { toast } from 'react-toastify';\nimport { register } from '../services/usersService';\nimport auth from '../services/authService';\n\nclass RegisterForm extends Form {\n  state = {\n    data: { mail: '', password: '', firstname: '', lastname: '' },\n    errors: {}\n  };\n\n  schema = {\n    lastname: Joi.string()\n      .max(255)\n      .label('Apellido'),\n    firstname: Joi.string()\n      .max(255)\n      .label('Nombre'),\n    mail: Joi.string()\n      .min(5)\n      .max(255)\n      .required()\n      .email()\n      .label('Mail'),\n    password: Joi.string()\n      .min(5)\n      .max(255)\n      .required()\n      .label('Clave')\n  };\n\n  componentDidMount() {\n    this.setState({ user: auth.getCurrentUser() });\n  }\n\n  doSubmit = async () => {\n    const { data } = this.state;\n    const { lastname } = data;\n\n    try {\n      await register(this.state.data); //const response=\n      toast.success(`😀 El usuario ${lastname} se registró con éxito.`, {\n        position: 'top-center'\n      });\n\n      const { history } = this.props;\n      history.push('/users');\n\n      // auth.loginWithJwt(response.headers['x-auth-token']);\n      // window.location = '/users';\n    } catch (ex) {\n      toast.error(`☹️ Error: ${ex.response.data}`);\n    }\n  };\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"rounded centered registrar\">\n          <div className=\"row\">\n            <h3 className=\"mx-auto\">\n              <i className=\"fa fa-user-plus mr-3 mb-2\" />\n              Registrar Usuario\n            </h3>\n          </div>\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"row\">\n              <div className=\"col\">\n                {this.renderInput('lastname', 'Apellido')}\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col\">\n                {this.renderInput('firstname', 'Nombre')}\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col\">{this.renderInput('mail', 'Mail')}</div>\n            </div>\n            <div className=\"row\">\n              <div className=\"col\">\n                {this.renderInput('password', 'Clave', 'password')}\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"mx-auto\">{this.renderButton('Acceder')}</div>\n            </div>\n          </form>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default RegisterForm;\n","import React, { Fragment } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Form from './common/Form';\nimport auth from '../services/authService';\nimport Joi from 'joi-browser';\n\nclass LoginForm extends Form {\n  state = {\n    data: { username: '', password: '' },\n    errors: {}\n  };\n\n  schema = {\n    username: Joi.string()\n      .min(5)\n      .max(255)\n      .required()\n      .email()\n      .label('Usuario'),\n    password: Joi.string()\n      .min(5)\n      .max(255)\n      .required()\n      .label('Clave')\n  };\n\n  doSubmit = async () => {\n    const { username, password } = this.state.data;\n    try {\n      await auth.login(username, password);\n      const { state } = this.props.location;\n      window.location = state ? state.from.pathname : '/';\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400) {\n        const errors = { ...this.state.errors };\n        errors.username = ex.response.data;\n        this.setState({ errors });\n      }\n    }\n  };\n\n  render() {\n    if (auth.getCurrentUser()) return <Redirect to=\"/\" />;\n\n    return (\n      <Fragment>\n        <div className=\"rounded centered login\">\n          <form onSubmit={this.handleSubmit}>\n            {this.renderInput('username', 'Usuario')}\n            {this.renderInput('password', 'Clave', 'password')}\n            {this.renderButton('Acceder')}\n          </form>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default LoginForm;\n","import { Component } from 'react';\nimport auth from '../services/authService';\nclass Logout extends Component {\n  componentDidMount() {\n    auth.logout();\n    window.location = '/';\n  }\n  render() {\n    return null;\n  }\n}\n\nexport default Logout;\n","import React from 'react';\n\nconst NotFound = () => {\n  return <h1>Not Found</h1>;\n};\n\nexport default NotFound;\n","import React, { Fragment } from 'react';\nimport { toast } from 'react-toastify';\nimport Joi from 'joi-browser';\nimport _ from 'lodash';\nimport CarbonModal from './common/CarbonModal';\nimport CarbonTable from './common/CarbonTable';\nimport BtnAux from './common/BtnAux';\nimport Form from './common/Form';\nimport { getModel, saveModel } from '../services/pmodelsServices';\nimport { getUnits } from '../services/unitsService';\nimport { getUsers } from '../services/usersService';\nimport auth from '../services/authService';\n\nclass ModelsForm extends Form {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {\n        label: '',\n        fUnits: [],\n        coefficient: 0,\n        landlord: '',\n        selectedUnit: ''\n      },\n      sortUnits: { path: 'fUnit', order: 'asc' },\n      units: [],\n      users: [],\n      errors: {},\n      keys: {},\n      modal: false\n    };\n\n    const currentUser = auth.getCurrentUser();\n    if (currentUser && currentUser.isAdmin)\n      this.columnsUnits.push(this.deleteColumn);\n\n    this.toggleDelete = this.toggleDelete.bind(this);\n  }\n\n  schema = {\n    _id: Joi.string(),\n    label: Joi.string()\n      .required()\n      .label('Nombre'),\n    landlord: Joi.string().label('Propietario'),\n    selectedUnit: Joi.string()\n      .required()\n      .label('Unidad seleccionada'),\n    fUnits: Joi.array()\n      .required()\n      .label('Unidades'),\n    coefficient: Joi.number()\n      .required()\n      .label('Coeficiente')\n  };\n\n  async populateUnits() {\n    const { data: units } = await getUnits();\n    this.setState({ units });\n  }\n  async populateUsers() {\n    const { data: users } = await getUsers();\n    this.setState({ users });\n  }\n\n  async populateModels() {\n    const modelId = this.props.match.params.id;\n    if (modelId === 'new') return;\n    const { data: model } = await getModel(modelId);\n\n    const keys = {\n      landlordKey: model.landlord._id\n    };\n\n    this.setState({ data: this.mapToViewModel(model), keys });\n  }\n\n  async componentDidMount() {\n    await this.populateModels();\n    await this.populateUnits();\n    await this.populateUsers();\n  }\n\n  mapToViewModel(model) {\n    return {\n      _id: model._id,\n      landlord: model.landlord._id,\n      label: model.label,\n      fUnits: model.fUnits,\n      coefficient: model.coefficient,\n      selectedUnit: 'DUMMY-UNIT'\n    };\n  }\n\n  doSubmit = async () => {\n    const model = { ...this.state.data };\n    const { users } = this.state;\n    const { landlordKey } = this.state.keys;\n\n    //selectedUnit no existe en mongo\n    delete model.selectedUnit;\n    model.landlord = users.find(e => {\n      return e._id === landlordKey;\n    })._id;\n\n    try {\n      await saveModel(model);\n      toast.success(`Los datos se guardaron exitosamente. ✔️`, {\n        position: 'top-center'\n      });\n    } catch (ex) {\n      console.log(ex.response);\n    }\n\n    const { history } = this.props;\n    history.push('/models');\n  };\n\n  handleUnitSort = sortUnits => {\n    this.setState({ sortUnits });\n  };\n\n  getCoefSum = units => {\n    console.log('coef');\n    return units.reduce((a, c) => a + c.coefficient, 0);\n  };\n\n  handleAddModel = () => {\n    const { selectedUnitKey } = this.state.keys;\n    const { units, data } = this.state;\n\n    //\n    const duplicate = data.fUnits.find(e => {\n      return e._id === selectedUnitKey;\n    });\n    if (duplicate) return toast.info('La unidad ya se encuentra asignada.');\n\n    const selectedUnit = units.find(e => {\n      return e._id === selectedUnitKey;\n    });\n\n    const bufferUnits = data.fUnits;\n    bufferUnits.push(selectedUnit);\n    data.coefficient = this.getCoefSum(bufferUnits);\n\n    this.setState({ fUnits: bufferUnits, data });\n  };\n\n  columnsUnits = [\n    { path: 'fUnit', label: 'Unidad' },\n    { path: 'floor', label: 'Piso' },\n    { path: 'flat', label: 'Rótulo' },\n    {\n      path: 'sup.total',\n      label: 'Superficie',\n      content: u => (\n        <p>\n          {Number(u.sup.total).toFixed(2)}m<sup>2</sup>\n        </p>\n      )\n    },\n    {\n      path: 'coefficient',\n      label: 'Coeficiente'\n    }\n  ];\n\n  deleteColumn = {\n    key: 'del',\n    content: model => (\n      <i\n        onClick={event => this.toggleDelete(model)}\n        className=\"fa fa-trash red clickable\"\n      />\n    )\n  };\n\n  toggleDelete(unit) {\n    this.setState(prevState => ({\n      modal: !prevState.modal,\n      selectedUnit: unit\n    }));\n  }\n\n  handleDelete = () => {\n    const { selectedUnit, data: model } = this.state;\n    const { landlordKey } = this.state.keys;\n\n    model.fUnits = model.fUnits.filter(u => u._id !== selectedUnit._id);\n    model.landlord = landlordKey;\n    model.coefficient = this.getCoefSum(model.fUnits);\n    this.setState({ model });\n\n    // try {\n    //   this.doSubmit();\n    //   toast.success(`😀 Los datos se actualizaron con éxito.`, {\n    //     position: 'top-center'\n    //   });\n    // } catch (ex) {\n    //   toast.error(`☹️ Error: ${ex.response.data}`);\n    //   this.setState({ models: rollback });\n    // }\n    this.toggleDelete();\n  };\n\n  renderProps(data, sortColumn) {\n    return (\n      <CarbonTable\n        columns={this.columnsUnits}\n        onDelete={this.toggleDelete}\n        data={data}\n        sortColumn={sortColumn}\n        onSort={this.handleUnitSort}\n      />\n    );\n  }\n\n  getSortedData = (data, sortColumn) => {\n    const sorted = _.orderBy(data, [sortColumn.path], [sortColumn.order]);\n    return sorted;\n  };\n\n  modalBody = unit => {\n    const { fUnit } = unit;\n    return (\n      <p className=\"lead\">\n        Se desaginará la unidad <mark>{fUnit}</mark> al usuario.\n      </p>\n    );\n  };\n\n  modalProps = selectedUnit => ({\n    isOpen: this.state.modal,\n    title: 'Elilminar asignación',\n    label: 'Consortia - Jose Ingenieros 1840',\n    body: selectedUnit && this.modalBody(selectedUnit),\n    cancelBtnLabel: 'Cancelar',\n    submitBtnLabel: 'Confirmar',\n    toggle: this.toggleDelete,\n    submit: this.handleDelete,\n    danger: true\n  });\n\n  render() {\n    const { sortUnits, data, users, units, selectedUnit } = this.state;\n    // const { landlordKey } = this.state.keys;\n    const sortedUnits = this.getSortedData(data.fUnits, sortUnits);\n\n    return (\n      <Fragment>\n        <CarbonModal {...this.modalProps(selectedUnit)} />\n        <div className=\"bx--grid cc--users-form\">\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                {this.renderInput('label', 'Nombre')}\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                {this.renderSelect(\n                  'landlord',\n                  'Propietario',\n                  '_id',\n                  users,\n                  true\n                )}\n              </div>\n              <div className=\"bx--col\">\n                {this.renderSelect('selectedUnit', 'Unidades', 'fUnit', units)}\n                <BtnAux\n                  label=\"Asignar\"\n                  onClick={event => this.handleAddModel(event)}\n                />\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                <mark>{` Coeficiente total: ${Number(data.coefficient).toFixed(\n                  2\n                )}`}</mark>\n                {this.renderProps(sortedUnits, sortUnits)}\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">{this.renderButton('Guardar')}</div>\n            </div>\n          </form>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default ModelsForm;\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport CarbonTable from './common/CarbonTable';\nimport auth from '../services/authService';\n\nclass ModelsTable extends Component {\n  constructor() {\n    super();\n    const currentUser = auth.getCurrentUser();\n    if (currentUser && currentUser.isAdmin)\n      this.columns.push(this.deleteColumn);\n  }\n\n  columns = [\n    {\n      path: 'label',\n      label: 'Nombre',\n      content: m => (\n        <div className=\"text-center\">\n          <Link to={`/models/${m._id}`}>{m.label}</Link>\n        </div>\n      )\n    },\n    {\n      path: 'fUnit',\n      label: 'Unidades',\n      content: m => (\n        <div className=\"text-center\">\n          <span className=\"badge badge-info\">\n            {m.fUnits.length === 1\n              ? m.fUnits[0].fUnit\n              : m.fUnits\n                  .reduce((prev, current) => `${(prev += current.fUnit)},`, '')\n                  .slice(0, -1)}\n          </span>\n        </div>\n      )\n    },\n    {\n      path: 'landlord',\n      label: 'Propietario',\n      content: m => (\n        <div className=\"text-center\">\n          <Link to={`/users/${m.landlord._id}`}>{m.landlord.lastname}</Link>\n        </div>\n      )\n    },\n    {\n      path: 'coefficient',\n      label: 'Coeficiente',\n      content: m => (\n        <div className=\"text-center\">\n          {Number(m.coefficient * 100).toFixed(3)}\n        </div>\n      )\n    }\n  ];\n\n  deleteColumn = {\n    key: 'del',\n    content: model => (\n      <i\n        onClick={event => this.props.onDelete(model)}\n        className=\"fa fa-trash red\"\n      />\n    )\n  };\n\n  render() {\n    const { models, onSort, sortColumn } = this.props;\n\n    return (\n      <CarbonTable\n        columns={this.columns}\n        data={models}\n        sortColumn={sortColumn}\n        onSort={onSort}\n      />\n    );\n  }\n}\n\nexport default ModelsTable;\n","import React, { Component, Fragment } from 'react';\nimport _ from 'lodash';\nimport SearchBox from './common/SearchBox';\nimport CarbonTableTitle from './common/CarbonTableTitle';\nimport CarbonTablePagination from './common/CarbonTablePagination';\nimport CarbonModal from './common/CarbonModal';\nimport ModelsTable from './ModelsTable';\nimport auth from '../services/authService';\nimport { getModels, deleteModel } from '../services/pmodelsServices';\nimport { paginate } from '../utils/paginate';\nimport Unauthorized from './common/Unauthorized';\n\nclass Models extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      models: {},\n      pageSize: 15,\n      currentPage: 1,\n      searchQuery: '',\n      sortColumn: { path: 'type', order: 'asc' },\n      modal: false\n    };\n\n    this.toggleDelete = this.toggleDelete.bind(this);\n  }\n\n  async componentDidMount() {\n    const { data: models } = await getModels();\n    this.setState({ models, currentUser: auth.getCurrentUser() });\n  }\n\n  handleSort = sortColumn => {\n    this.setState({ sortColumn });\n  };\n\n  handleAddModel = () => {\n    const { history } = this.props;\n    history.push('/models/new');\n  };\n\n  handlePageSize = event => {\n    this.setState({ pageSize: event.target.value });\n  };\n\n  handlePageChange = (page, arrow, pagesCount) => {\n    const { value } = page.target;\n    let { currentPage } = this.state;\n\n    currentPage = value ? Number(value) : (currentPage += arrow);\n    if (currentPage < 1) currentPage = 1;\n    if (currentPage > pagesCount) currentPage = pagesCount;\n\n    this.setState({ currentPage });\n  };\n  handleSearch = query => {\n    this.setState({ searchQuery: query, currentPage: 1 });\n  };\n\n  toggleDelete(model) {\n    this.setState(prevState => ({\n      modal: !prevState.modal,\n      selectedModel: model\n    }));\n  }\n\n  handleDelete = () => {\n    const { selectedModel } = this.state;\n    const rollback = this.state.models;\n\n    const models = this.state.models.filter(u => u._id !== selectedModel._id);\n\n    this.setState({ models });\n\n    try {\n      deleteModel(selectedModel._id);\n    } catch (ex) {\n      this.setState({ models: rollback });\n    }\n    this.toggleDelete();\n  };\n\n  getPageData = () => {\n    const {\n      models: allModels,\n      pageSize,\n      currentPage,\n      sortColumn,\n      searchQuery\n    } = this.state;\n\n    let filtered = allModels;\n\n    if (searchQuery) {\n      filtered = allModels.filter(u =>\n        u.label.toLowerCase().startsWith(searchQuery.toLowerCase())\n      );\n    }\n\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\n    const models = paginate(sorted, currentPage, pageSize);\n\n    return {\n      totalCount: filtered.length || 0,\n      data: models\n    };\n  };\n\n  modalBody = model => {\n    const { label, landlord } = model;\n    if (!landlord) return null;\n    return (\n      <p className=\"lead\">\n        El esquema {label} asignado a {landlord.lastname} se eliminará.\n      </p>\n    );\n  };\n\n  modalProps = selectedUser => ({\n    isOpen: this.state.modal,\n    title: 'Eliminar esquema de expensas',\n    label: 'Consortia - Jose Ingenieros 1840',\n    body: selectedUser && this.modalBody(selectedUser),\n    cancelBtnLabel: 'Cancelar',\n    submitBtnLabel: 'Eliminar',\n    toggle: this.toggleDelete,\n    submit: this.handleDelete,\n    danger: true\n  });\n  render() {\n    const { pageSize, currentPage, sortColumn, searchQuery } = this.state;\n    const { currentUser, selectedModel } = this.state;\n\n    if (currentUser && !currentUser.isCouncil) return <Unauthorized />;\n\n    const { totalCount, data: models } = this.getPageData();\n\n    return (\n      <Fragment>\n        <CarbonModal {...this.modalProps(selectedModel)} />\n        <CarbonTableTitle\n          title=\"Esquemas de expensas\"\n          helper=\"Lista de esquemas para el regitro de espensas.\"\n          btnLabel=\"Registrar esquema\"\n          btnClick={this.handleAddModel}\n          currentUser={currentUser}\n        />\n        <div className=\"bx--row cc--users-form\">\n          <div className=\"bx--col\">\n            <SearchBox value={searchQuery} onChange={this.handleSearch} />\n            <ModelsTable\n              models={models}\n              onDelete={this.toggleDelete}\n              onSort={this.handleSort}\n              sortColumn={sortColumn}\n            />\n            <CarbonTablePagination\n              itemsCount={totalCount}\n              pageSize={pageSize}\n              currentPage={currentPage}\n              onPageSize={this.handlePageSize}\n              onPageChange={this.handlePageChange}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Models;\n","import React, { Fragment } from 'react';\nimport Joi from 'joi-browser';\nimport Form from './common/Form';\nimport { getConsortia, saveConsortia } from '../services/consortiaService';\nimport auth from '../services/authService';\nimport { toast } from 'react-toastify';\nimport Unauthorized from './common/Unauthorized';\n\nclass Consortia extends Form {\n  state = {\n    data: {\n      name: '',\n      address: '',\n      cbu: '',\n      bank: '',\n      mail: '',\n      expenseA: 0,\n      expenseB: 0,\n      interest: 0,\n      balanceA: 0,\n      balanceB: 0\n    },\n    errors: {}\n  };\n\n  schema = {\n    _id: Joi.string().required(),\n    name: Joi.string().required(),\n    address: Joi.string().required(),\n    cbu: Joi.string().required(),\n    bank: Joi.string().required(),\n    mail: Joi.string()\n      .email()\n      .required(),\n    expenseA: Joi.number()\n      .allow(0)\n      .required(),\n    expenseB: Joi.number()\n      .allow(0)\n      .required(),\n    interest: Joi.number()\n      .allow(0)\n      .required(),\n    balanceA: Joi.number()\n      .allow(0)\n      .required(),\n    balanceB: Joi.number()\n      .allow(0)\n      .required()\n  };\n\n  async populateConsotia() {\n    const { data: consortia } = await getConsortia();\n    if (consortia.length === 0) return;\n    this.setState({\n      data: this.mapToViewModel(consortia[0]),\n      currentUser: auth.getCurrentUser()\n    });\n  }\n\n  async componentDidMount() {\n    await this.populateConsotia();\n  }\n\n  mapToViewModel(consortia) {\n    return {\n      _id: consortia._id,\n      name: consortia.name,\n      address: consortia.address,\n      cbu: consortia.cbu,\n      bank: consortia.bank,\n      mail: consortia.mail,\n      expenseA: consortia.expenseA,\n      expenseB: consortia.expenseB,\n      interest: consortia.interest,\n      balanceA: consortia.balanceA,\n      balanceB: consortia.balanceB\n    };\n  }\n\n  doSubmit = async () => {\n    const consortia = { ...this.state.data };\n    // const { _id } = auth.getCurrentUser();\n    if (consortia.interest > 1) consortia.interest = consortia.interest / 100;\n    try {\n      await saveConsortia(consortia);\n      toast.success(`Los datos se guardaron exitosamente. ✔️`, {\n        position: 'top-center'\n      });\n    } catch (ex) {\n      console.log(ex.response);\n    }\n  };\n\n  render() {\n    const { currentUser } = this.state;\n\n    if (currentUser && !currentUser.isCouncil) return <Unauthorized />;\n\n    return (\n      <Fragment>\n        <div className=\"bx--grid\">\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                {this.renderInput('name', 'Nombre')}\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                {this.renderInput('address', 'Domicilio')}\n              </div>\n              <div className=\"bx--col\">\n                {this.renderInput('mail', 'Correo Electrónico')}\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                {this.renderInput('bank', 'Datos Bancarios')}\n              </div>\n              <div className=\"bx--col\">{this.renderInput('cbu', 'CBU')}</div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                {this.renderInput('expenseA', 'Expensas A')}\n              </div>\n              <div className=\"bx--col\">\n                {this.renderInput('expenseB', 'Expensas B')}\n              </div>\n              <div className=\"bx--col\">\n                {this.renderInput('interest', 'Interes por mora (%)')}\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                {this.renderInput('balanceA', 'Saldo A')}\n              </div>\n              <div className=\"bx--col\">\n                {this.renderInput('balanceB', 'Saldo B')}\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">{this.renderButton('Guardar')}</div>\n            </div>\n          </form>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Consortia;\n","import React from 'react';\nimport auth from '../../services/authService';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ path, component: Component, render, ...rest }) => {\n  return (\n    <Route\n      {...rest}\n      render={props => {\n        if (!auth.getCurrentUser())\n          return (\n            <Redirect\n              to={{\n                pathname: '/login',\n                state: { from: props.location }\n              }}\n            />\n          );\n        return Component ? <Component {...props} /> : render(props);\n      }}\n    />\n  );\n};\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nconst SideBarItem = ({ label, to }) => {\n  return (\n    <li>\n      <NavLink className=\"nav-link nav-item\" to={to}>\n        {label}\n      </NavLink>\n    </li>\n  );\n};\n\nexport default SideBarItem;\n","import React from 'react';\n\nconst SideSeparator = ({ label }) => {\n  return (\n    <h6 className=\"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted\">\n      <span>{label}</span>\n    </h6>\n  );\n};\n\nexport default SideSeparator;\n","import React, { Fragment } from 'react';\nimport SideBarItem from './common/SideBarItem';\nimport SideSeparator from './common/SideSeparator';\n\nconst SideBar = ({ user }) => {\n  console.log('SideBar:', user);\n  return (\n    <nav className=\"col-md-2 d-none d-md-block  sidebar\">\n      <div className=\"sidebar-sticky\">\n        {/* {!user && (\n          <Fragment>\n            <ul className=\"nav flex-column\">\n              <SideBarItem label=\"Acceder\" to=\"/login\" />\n            </ul>\n          </Fragment>\n        )} */}\n\n        {user && (\n          <Fragment>\n            <SideSeparator label=\"Información\" />\n            <ul className=\"nav flex-column mb-2\">\n              <SideBarItem label=\"Usuarios\" to=\"/users\" />\n              <SideBarItem label=\"Proveedores\" to=\"/suppliers\" />\n              <SideBarItem label=\"Expensas\" to=\"/periods\" />\n            </ul>\n          </Fragment>\n        )}\n        {user && user.isCouncil && (\n          <Fragment>\n            <SideSeparator label=\"Movimientos\" />\n            <ul className=\"nav flex-column mb-2\">\n              <SideBarItem label=\"Gastos\" to=\"/expenses\" />\n              <SideBarItem label=\"Pagos\" to=\"/payments\" />\n            </ul>\n            <SideSeparator label=\"Configuración\" />\n            <ul className=\"nav flex-column mb-2\">\n              <SideBarItem label=\"Unidades\" to=\"/units\" />\n              <SideBarItem label=\"Esquemas\" to=\"/models\" />\n              <SideBarItem label=\"Configuración\" to=\"/consortia\" />\n            </ul>\n          </Fragment>\n        )}\n      </div>\n    </nav>\n  );\n};\n\nexport default SideBar;\n","import React from 'react';\nimport { Link, NavLink } from 'react-router-dom';\n\nconst NavBar = ({ user, consortia }) => {\n  return (\n    <nav className=\"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\">\n      <Link className=\"navbar-brand col-sm-3 col-md-2 mr-0\" to=\"/\">\n        Consortia\n      </Link>\n      {user && (\n        <React.Fragment>\n          <ul className=\"navbar-nav px-3\">\n            <li className=\"nav-item text-nowrap\">\n              <NavLink className=\"nav-link\" to=\"/\">\n                <h6>\n                  {consortia.name}\n                  <small className=\"text-muted\">{` Consorcio`}</small>\n                </h6>\n              </NavLink>\n            </li>\n          </ul>\n          <ul className=\"navbar-nav px-3\">\n            <li className=\"nav-item text-nowrap\">\n              <NavLink className=\"nav-item  pl-3\" to={`/users/${user._id}`}>\n                {`${user.mail} `}\n                <i className=\"fa fa-user-circle\" />\n              </NavLink>\n              <NavLink className=\"nav-item pl-3\" to=\"/logout\">\n                <i className=\"fa fa-sign-out\" />\n              </NavLink>\n            </li>\n          </ul>\n        </React.Fragment>\n      )}\n    </nav>\n  );\n};\n\nexport default NavBar;\n","import React, { Component, Fragment } from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\nimport Home from './components/Home';\nimport UnitsForm from './components/UnitsForm';\nimport Units from './components/Units';\nimport Users from './components/Users';\nimport UsersForm from './components/UsersForm';\nimport CurrentMonth from './components/CurrentMonth';\nimport Periods from './components/Periods';\nimport PeriodsForm from './components/PeriodsForm';\nimport Expenses from './components/Expenses';\nimport ExpensesForm from './components/ExpensesForm';\nimport Payments from './components/Payments';\nimport Suppliers from './components/Suppliers';\nimport SuppliersForm from './components/SuppliersForm';\nimport RegisterForm from './components/RegisterForm';\nimport LoginForm from './components/LoginForm';\nimport Logout from './components/Logout';\nimport NotFound from './components/NotFound';\nimport ModelsForm from './components/ModelsForm';\nimport Models from './components/Models';\nimport Consortia from './components/Consortia';\nimport ProtectedRoute from './components/common/ProtectedRoute';\nimport auth from './services/authService';\nimport SideBar from './components/SideBar';\nimport NavBar from './components/NavBar';\nimport { getConsortia } from './services/consortiaService';\n\nclass App extends Component {\n  state = {};\n  async componentDidMount() {\n    const user = auth.getCurrentUser();\n    const { data } = await getConsortia();\n    const consortia = data[0];\n    this.setState({ user, consortia });\n  }\n  render() {\n    const { user, consortia } = this.state;\n\n    return (\n      <Fragment>\n        <ToastContainer />\n        <NavBar user={user} consortia={consortia} />\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <SideBar user={user} />\n            <main role=\"main\" className=\"col-md-9 ml-sm-auto col-lg-10 px-4\">\n              <Switch>\n                <Route path=\"/login\" component={LoginForm} />\n                <Route path=\"/logout\" component={Logout} />\n                <ProtectedRoute path=\"/register\" component={RegisterForm} />\n                <ProtectedRoute\n                  path=\"/suppliers/:id\"\n                  component={SuppliersForm}\n                />\n                <ProtectedRoute path=\"/suppliers\" component={Suppliers} />\n                <ProtectedRoute\n                  path=\"/periods/:id/:period\"\n                  component={PeriodsForm}\n                />\n                <ProtectedRoute path=\"/periods/:id/\" component={PeriodsForm} />\n                <ProtectedRoute path=\"/periods\" component={Periods} />\n                <ProtectedRoute path=\"/models/:id\" component={ModelsForm} />\n                <ProtectedRoute path=\"/models\" component={Models} />\n                <ProtectedRoute path=\"/current\" component={CurrentMonth} />\n                <ProtectedRoute path=\"/periods\" component={Periods} />\n                <ProtectedRoute path=\"/payments\" component={Payments} />\n                <ProtectedRoute path=\"/expenses/:id\" component={ExpensesForm} />\n                <ProtectedRoute path=\"/expenses\" component={Expenses} />\n                <ProtectedRoute path=\"/units/:id\" component={UnitsForm} />\n                <ProtectedRoute path=\"/units\" component={Units} />} />\n                <ProtectedRoute path=\"/consortia\" component={Consortia} />} />\n                <ProtectedRoute path=\"/users/:id\" component={UsersForm} />} />\n                <ProtectedRoute path=\"/users\" component={Users} />} />\n                <Route path=\"/not-found\" component={NotFound} />\n                <ProtectedRoute exact path=\"/\" component={Home} />\n                <Redirect to=\"/login\" />\n              </Switch>\n            </main>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\n//Render props of Router tag is used if additionals props are\n//required by the cuild component.\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport logger from './services/logService';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\n// import './styles/index.scss';\nimport './dashboard.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'font-awesome/css/font-awesome.css';\nimport 'react-toastify/dist/ReactToastify.css';\nlogger.init();\n\nconsole.log(\n  'index.js - process.env.REACT_APP_NAME',\n  process.env.REACT_APP_NAME,\n  process.env.REACT_APP_API_URL\n);\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}